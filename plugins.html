<!DOCTYPE html>
<html data-astro-cid-sckkx6r4="" lang="ar" dir="rtl">
  <head>
  
    <title>الإضافات | VenSHORT</title>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <link href="assets/favicon.png" rel="icon"/>
    <link as="font" crossorigin="" href="fonts/Inter.var-subset.woff2" rel="preload" type="font/woff2"/>
    <meta content="تصفح قائمة إضافات Vencord المصنفة وقم بإنشاء ملف التكوين الخاص بك" name="description"/>
    <meta content="مساهمو Vencord" name="author"/>
    <meta content="#dd7878" name="theme-color"/>
    <meta content="website" name="og:type"/>
    <meta content="الإضافات المصنفة | مولد التكوين" name="og:title"/>
    <meta content="تصفح قائمة إضافات Vencord المصنفة وقم بإنشاء ملف التكوين الخاص بك" name="og:description"/>
    <meta content="plugins.html" name="og:url"/>
    <meta content="assets/favicon.png" name="og:image"/>
    <meta content="Vencord" name="og:site_name"/>
    <script type="application/ld+json"></script>

    <link href="sitemap-index.xml" rel="sitemap"/>
    <meta name="darkreader-lock"/>
    <link href="plugins.html" rel="canonical"/>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@400;700&display=swap');

      body {
        font-family: 'Noto Sans Arabic', sans-serif;
      }
      /*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */
      html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}
    </style>

    <link href="_astro/gdpr.61vMHWDU.css" rel="stylesheet"/>
    <style>
      /* CSS Variables (Matched with plugins.html) */
      :root {
        --bg0: #1e1e2e;
        --bg1: #313244;
        --bg2: #45475a;
        --bg3: #585b70;
        --bg4: #6c7086;
        --fg0: #cdd6f4;
        --fg1: #bac2de;
        --grey0: #9399b2;
        --grey1: #7f849c;
        --grey2: #6c7086;
        --accentBlue: #89b4fa;
        --accentLavender: #b4befe;
        --accentSapphire: #74c7ec;
        --accentSky: #89dceb;
        --accentTeal: #94e2d5;
        --accentGreen: #a6e3a1;
        --accentYellow: #f9e2af;
        --accentPeach: #fab387;
        --accentMaroon: #eba0ac;
        --accentRed: #f38ba8;
        --accentMauve: #cba6f7;
        --accentPink: #f5c2e7;
        --accentFlamingo: #f2cdcd;
        --accentRosewater: #f5e0dc;
        --accentPurple: #b4befe; /* Main accent for buttons */
        --accentAqua: #94e2d5; /* Used for copy feedback */
        --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        --border-sm: 0.125rem;
        --border-md: 0.25rem;
        --border-lg: 0.5rem;
      }

      /* اجعل الجسم عموديًا ويأخذ كامل ارتفاع الشاشة */
      body {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        background-color: var(--bg0); /* Base background */
        color: var(--fg0); /* Base foreground */
      }

      /* المحتوى الرئيسي يتمدد ليملأ المساحة الفارغة */
      .container, astro-island {
        flex: 1;
        max-width: 1200px; /* Limit width for better readability */
        margin: 0 auto; /* Center the container */
        padding: 1em 2em; /* Add padding */
      }

      /* تنسيق الفوتر (Matched with plugins.html) */
      footer {
        margin-top: auto;  /* يدفع الفوتر إلى أسفل */
        padding: 1em;
        background-color: #2c3e50; /* Match plugins.html explicit color */
        color: #ffffff; /* Match plugins.html explicit color */
        text-align: center;
        font-family: 'Noto Sans Arabic', sans-serif; /* Ensure font consistency */
      }
      footer p {
          margin: 5px 0; /* Add spacing like plugins.html footer divs */
      }

      /* --- General Text Sizes --- */
      h1.p-page-title {
        color: var(--accentBlue); /* Match plugins.html */
        font-size: 2.5em; /* Slightly larger main title */
        margin-bottom: 0.2em;
      }
      p.p-subtitle {
        font-size: 1.1em; /* Slightly larger subtitle */
        color: var(--fg1);
        margin-bottom: 1.5em;
      }
      /* --- Category Header Styles --- */
      h2.category-header {
          font-size: 1.8em; /* Adjusted size */
          margin-block: 2em 0.8em; /* Adjust spacing */
          color: var(--accentLavender); /* Give headings some color */
          border-bottom: 2px solid var(--accentLavender);
          padding-bottom: 0.3em;
      }
      h3 { /* Plugin Title */
        margin: 0;
        word-wrap: break-word;
        line-height: 1.3; /* Adjust line height */
        font-size: 1.1em; /* Make plugin titles slightly larger */
        color: var(--fg0);
        font-weight: 700; /* Make titles bolder */
      }
      .author {
        white-space: nowrap;
        font-size: 0.85em; /* Slightly smaller author text */
        color: var(--grey1);
      }
      .author:before {
        content: "بواسطة ";
        color: var(--grey1); /* Match author text color */
      }
      .description {
        font-size: .9em;
        color: var(--fg1); /* Use slightly lighter grey for description */
        filter: brightness(100%); /* Remove brightness filter, adjust color directly */
        margin-bottom: 0.5em; /* Add space before settings */
        display: -webkit-box;
        -webkit-line-clamp: 3;
        line-clamp: 3;
        -webkit-box-orient: vertical;
        box-orient: vertical;
        line-height: 1.4; /* Improve readability */
      }

      /* --- Plugin Card Styles --- */
      .plugin {
        display: flex;
        align-items: flex-start; /* Align checkbox to top */
        gap: 15px; /* Increased gap */
        padding: 1.5em; /* Increased padding */
        border-radius: var(--border-lg);
        box-shadow: var(--shadow-md); /* Use medium shadow */
        transition: box-shadow 0.3s ease, transform 0.2s ease; /* Add transform transition */
        background-color: var(--bg1);
        /* margin-bottom removed, handled by grid gap */
        cursor: pointer; /* Make the whole card clickable */
      }
      .plugin:hover {
        box-shadow: var(--shadow-lg); /* Use large shadow on hover */
        transform: translateY(-2px); /* Add slight lift effect */
      }

      .plugin .plugin-content {
        flex-grow: 1;
        display: flex; /* Enable flex for content alignment */
        flex-direction: column;
        gap: 0.3em; /* Space between title, author, description */
      }
      .plugin input[type="checkbox"].plugin-checkbox { /* Target only main checkbox */
        flex-shrink: 0;
        margin-top: 0.2em; /* Align checkbox better with title */
        height: 1.3em; /* Slightly larger checkbox */
        width: 1.3em;
        cursor: pointer;
        accent-color: var(--accentPurple); /* Style the checkbox color */
      }
      /* Ensure direct clicks on content inside the link don't trigger nav */
      .plugin .plugin-link * {
          pointer-events: none;
      }

      /* --- Plugin Settings UI --- */
      .plugin-settings {
          margin-top: 0.8em;
          padding-top: 0.8em;
          border-top: 1px solid var(--bg3);
          display: flex;
          flex-direction: column;
          gap: 0.6em;
      }
      .plugin-setting {
          display: flex;
          align-items: center;
          gap: 0.8em;
      }
      .plugin-setting label {
          font-size: 0.85em;
          color: var(--fg1);
          flex-basis: 120px; /* Give labels a fixed base width */
          flex-shrink: 0;
          text-align: right; /* Align label text right */
          margin-right: 5px;
      }
      .plugin-setting input[type="text"],
      .plugin-setting input[type="number"],
      .plugin-setting input[type="color"],
      .plugin-setting select {
          font-size: 0.85em;
          padding: 0.3em 0.5em;
          border-radius: var(--border-sm);
          border: 1px solid var(--bg3);
          background-color: var(--bg0);
          color: var(--fg0);
          flex-grow: 1; /* Allow input to take remaining space */
          max-width: 200px; /* Limit max width */
          box-sizing: border-box;
      }
      .plugin-setting input[type="checkbox"] { /* Settings checkbox */
           height: 1.1em;
           width: 1.1em;
           accent-color: var(--accentPurple);
           cursor: pointer;
           order: -1; /* Put checkbox before label */
           margin-right: -0.4em; /* Adjust spacing */
      }
       .plugin-setting input[type="color"] {
           padding: 0.1em; /* Adjust padding for color input */
           min-height: 25px; /* Ensure color input has height */
       }
        /* Make settings inputs clickable inside the card */
       .plugin-setting input, .plugin-setting select {
            cursor: text; /* Or appropriate cursor */
            pointer-events: all !important; /* Allow interaction */
       }
       .plugin-setting label {
           pointer-events: all !important; /* Allow clicking label */
           cursor: default;
       }


      /* --- Generation Section Styles --- */
      #generation-section {
        margin-top: 3em; /* Increased top margin */
        padding: 2.5em; /* Increased padding */
        background-color: var(--bg2); /* Use slightly different background */
        border-radius: var(--border-lg);
        display: flex;
        flex-direction: column;
        gap: 2em;
        border: 1px solid var(--bg3);
      }
       #generation-section h2 { /* Style heading inside generation section */
          font-size: 1.8em;
          margin: 0 0 0.5em 0;
          padding: 0;
          border: none;
          color: var(--accentTeal);
      }
      #generation-controls {
        display: flex;
        gap: 1.2em;
        flex-wrap: wrap;
        align-items: center; /* Align items vertically */
      }
      #generateConfigBtn, #copyConfigBtn, #downloadConfigBtn, #enableAllBtn, #disableAllBtn, #selectAllBtn, #selectSuggestedBtn, #restartDiscordBtn { /* Include restart button */
        padding: 0.9em 1.8em; /* Adjusted padding */
        color: white;
        border: none;
        border-radius: var(--border-md);
        cursor: pointer;
        font-size: 1em; /* Unified font size for buttons */
        transition: background-color 0.2s ease, opacity 0.2s ease, transform 0.1s ease;
        font-family: 'Noto Sans Arabic', sans-serif;
        opacity: 1;
        font-weight: 700;
      }
      #generateConfigBtn, #enableAllBtn, #disableAllBtn {
        background-color: var(--accentBlue);
      }
      #copyConfigBtn, #downloadConfigBtn, #selectAllBtn, #selectSuggestedBtn {
        background-color: var(--accentPurple);
      }
      #restartDiscordBtn {
        background-color: var(--accentRed); /* Warning color */
        margin-right: auto; /* Push restart button to the end (in RTL) */
      }
      #copyConfigBtn, #downloadConfigBtn {
        opacity: 0.6;
        cursor: not-allowed;
      }
      #copyConfigBtn.enabled, #downloadConfigBtn.enabled {
        opacity: 1;
        cursor: pointer;
      }

      /* Button Hover & Active States */
      #generateConfigBtn:hover, #enableAllBtn:hover, #disableAllBtn:hover {
        background-color: hsl(from var(--accentBlue) h s calc(l - 8%));
      }
      #copyConfigBtn.enabled:hover, #downloadConfigBtn.enabled:hover, #selectAllBtn:hover, #selectSuggestedBtn:hover {
        background-color: hsl(from var(--accentPurple) h s calc(l - 8%));
      }
      #restartDiscordBtn:hover {
          background-color: hsl(from var(--accentRed) h s calc(l - 8%));
      }
       #generateConfigBtn:active, #enableAllBtn:active, #disableAllBtn:active,
       #copyConfigBtn.enabled:active, #downloadConfigBtn.enabled:active, #selectAllBtn:active, #selectSuggestedBtn:active, #restartDiscordBtn:active {
           transform: scale(0.98); /* Add press effect */
       }

      #copyConfigBtn.copied {
        background-color: var(--accentAqua);
        color: var(--bg0); /* Darker text for contrast */
      }
      #copyConfigBtn.copied:hover {
          background-color: hsl(from var(--accentAqua) h s calc(l - 8%));
      }

      #jsonOutput {
        width: 100%;
        min-height: 350px;
        background-color: var(--bg0);
        color: var(--fg0);
        border: 1px solid var(--bg3);
        border-radius: var(--border-md);
        padding: 1.5em; /* Increased padding */
        font-family: monospace;
        white-space: pre;
        overflow: auto;
        box-sizing: border-box;
        resize: vertical;
        direction: ltr;
        text-align: left;
        font-size: 0.9em; /* Slightly smaller font for code */
        line-height: 1.5;
      }

      /* --- Selection Button Styles --- */
      #selection-buttons {
        margin-bottom: 1.5em;
        margin-top: 1.5em; /* Add margin top */
        display: flex;
        gap: 1em;
        flex-wrap: wrap;
      }
      /* Specific styles already handled above */


      /* --- Required Plugins Notice --- */
      #required-plugins-notice {
        margin-top: 1.5em;
        padding: 1em 1.5em; /* Adjust padding */
        background-color: rgba(from var(--accentYellow) r g b / 0.1); /* Use variable */
        border: 1px solid rgba(from var(--accentYellow) r g b / 0.3);
        border-radius: var(--border-md);
        font-size: 0.9em;
        color: var(--accentYellow);
      }
      #required-plugins-notice h4 {
        margin-top: 0;
        margin-bottom: 0.5em;
        color: var(--accentYellow);
        font-size: 1.1em;
        font-weight: 700;
      }
       #required-plugins-notice p {
           margin-bottom: 1em;
           line-height: 1.5;
           color: var(--fg1);
       }
      .required-plugin {
        background-color: rgba(from var(--accentYellow) r g b / 0.05);
        border-radius: var(--border-sm);
        padding: 0.6em 1em; /* Adjust padding */
        margin-bottom: 0.5em;
        color: var(--fg0);
      }
      .plugin.required-core-plugin {
        background-color: rgba(from var(--accentYellow) r g b / 0.05);
        border: 1px solid rgba(from var(--accentYellow) r g b / 0.2);
        cursor: not-allowed; /* Indicate non-interactivity */
      }
      .plugin.required-core-plugin:hover {
        box-shadow: var(--shadow-md); /* Keep normal shadow on hover */
        transform: none; /* No lift effect */
      }
      .plugin.required-core-plugin input[type="checkbox"] {
        opacity: 0.6;
        cursor: not-allowed;
      }

      /* --- Plugin Grid Styles --- */
      /* This will now contain category headers AND the plugin grid */
      .plugins-container {
        /* No specific grid here anymore */
      }
      .plugins-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)); /* Wider minimum for settings */
        grid-auto-columns: 1fr;
        grid-gap: 1.2em; /* Increased gap */
      }

      /* Ellipsis Overflow */
      .ellipsis-overflow {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap; /* Add nowrap for ellipsis to work */
      }


      /* Search and Filter Styles */
      .search {
        position: relative;
        height: auto;
        margin-top: 1.5em;
        margin-bottom: 1em; /* Add margin below */
      }
      .search svg {
        position: absolute; /* Keep absolute */
        left: 1em; /* Adjust position */
        top: 50%;
        transform: translateY(-50%);
        z-index: 2;
        color: var(--grey0);
        height: 1.1em; /* Slightly larger icon */
        pointer-events: none; /* Prevent icon interaction */
      }
      .search input {
        position: relative; /* Change to relative */
        text-indent: 0; /* Remove indent, use padding */
        padding-left: 2.8em; /* Add padding for icon */
        background: var(--bg2); /* Use different background */
        color: var(--fg0);
        border: 1px solid var(--bg3); /* Add subtle border */
        border-radius: var(--border-md); /* Use medium border */
        box-sizing: border-box;
        width: 100%;
        margin: 0;
        padding: 0.9em 1em 0.9em 2.8em; /* Adjust padding */
        font-size: 1em;
      }
      .search input::placeholder {
        color: var(--grey1);
      }
      .search input:focus {
          outline: none;
          border-color: var(--accentBlue);
          box-shadow: 0 0 0 2px rgba(from var(--accentBlue) r g b / 0.3);
      }

      .criteria {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        gap: 1.5em; /* Increased gap */
        margin-top: 1em;
        margin-bottom: 1em; /* Add margin below */
      }
      .criteria label {
        display: flex;
        gap: .6em; /* Increased gap */
        flex-direction: row;
        align-items: center;
        white-space: nowrap;
        font-size: 0.9em;
        color: var(--fg1);
        cursor: pointer;
      }
      .criteria input[type="checkbox"] {
          height: 1.1em;
          width: 1.1em;
          accent-color: var(--accentPurple);
          cursor: pointer;
      }

      /* Logo Styles */
      #logo img {
        width: 100px;
        height: auto;
        max-width: 100%;
      }

      /* Nav Styles */
      nav {
          background-color: var(--bg1);
          padding: 0.5em 1em;
          border-bottom: 1px solid var(--bg3);
      }
      .nav-content {
          max-width: 1200px;
          margin: 0 auto;
          display: flex;
          justify-content: space-between;
          align-items: center;
      }
       #btns ul {
           list-style: none;
           padding: 0;
           margin: 0;
           display: flex;
       }
       #btns li {
           margin-left: 1em; /* Use margin-left for LTR spacing, will appear right in RTL */
       }
       #btns a {
           text-decoration: none;
           color: var(--accentPurple);
           font-weight: 700;
           padding: 0.5em 1em;
           border-radius: var(--border-md);
           transition: background-color 0.2s ease;
       }
       #btns a:hover {
           background-color: rgba(from var(--accentPurple) r g b / 0.1);
       }

    </style>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const requiredPlugins = ["NoTrack", "Settings", "SupportHelper"];

        // --- بيانات الإضافات الأولية (مع الإضافات المضافة) ---
        const initialPluginsData = [
            // --- Core / Required ---
             { name: "Settings", description: "إعدادات Vencord", author: "Vencord", configurableSettings: [ { key: "settingsLocation", label: "مكان الإعدادات:", type: "select", options: ["aboveNitro", "belowNitro"], defaultValue: "aboveNitro" } ] },
             { name: "SupportHelper", description: "مساعدة في حل المشكلات وتقديم الدعم", author: "Vencord" },
             { name: "NoTrack", description: "منع تتبع البيانات", author: "Vencord", configurableSettings: [ { key: "disableAnalytics", label: "تعطيل التحليلات:", type: "boolean", defaultValue: true }, ] },
             { name: "CrashHandler", description: "معالجة الأعطال ومنع إعادة التشغيل التلقائي", author: "Nuckyz" },

            // --- Nitro-like Features ---
             { name: "FakeNitro", description: "استخدام ميزات Nitro بدون اشتراك (بعض الإعدادات أدناه)", author: "Vencord Team", configurableSettings: [ { key: "enableEmojiBypass", label: "تجاوز الرموز التعبيرية:", type: "boolean", defaultValue: true }, { key: "emojiSize", label: "حجم الرموز:", type: "number", defaultValue: 48, min: 16, max: 128 }, { key: "stickerSize", label: "حجم الملصقات:", type: "number", defaultValue: 160, min: 64, max: 320 }, ] },
             { name: "EmoteCloner", description: "استنساخ الرموز التعبيرية والملصقات إلى خادمك", author: "Vee, Nuckyz" },
             { name: "FakeProfileThemes", description: "إضافة سمات ملف شخصي مخصصة (الإعدادات في Vencord)", author: "Vendicated" },
             { name: "AlwaysAnimate", description: "تحريك أي شيء يمكن تحريكه", author: "Fiery" },
             { name: "Decor", description: "تخصيص إطارات الصور الرمزية", author: "Fiery" },

             // --- UI Enhancements ---
             { name: "AlwaysExpandRoles", description: "توسيع قائمة الأدوار دائمًا في نوافذ الملفات الشخصية", author: "Chloe" },
             { name: "BetterFolders", description: "عرض مجلدات الخادم على الشريط الجانبي المخصص وتحسينات أخرى", author: "Juby210, AutumnVN, Nuckyz" },
             { name: "BetterRoleContext", description: "خيارات إضافية عند النقر بزر الماوس الأيمن على الأدوار", author: "Vee, goodbee" },
             { name: "BetterRoleDot", description: "نسخ لون الدور عند النقر على النقطة والسماح بكلاهما مع الأسماء الملونة", author: "Vee, AutumnVN" },
             { name: "BetterSettings", description: "تحسين تجربة فتح قائمة الإعدادات", author: "Kyuuhachi" },
             { name: "BetterUploadButton", description: "التحميل بنقرة واحدة، وفتح القائمة بالنقر بزر الماوس الأيمن", author: "fawn, Vee" },
             { name: "ClientTheme", description: "تغيير لون خلفية العميل", author: "Vendicated", configurableSettings: [ { key: "color", label: "لون السمة:", type: "color", defaultValue: "#313338" } ] },
             { name: "ColorSighted", description: "إزالة أيقونات حالة عمى الألوان (مثل Discord القديم)", author: "lewisakura" },
             { name: "ForceOwnerCrown", description: "إظهار تاج مالك الخادم دائمًا", author: "D3SOX, Nickyux" },
             { name: "MemberCount", description: "عرض عدد الأعضاء في قائمة الأعضاء", author: "Vee, Commandtechno" },
             { name: "NewGuildSettings", description: "تطبيق إعدادات تلقائية عند الانضمام لخادم جديد", author: "Glitchy et al.", configurableSettings: [ {key: "guild", label: "كتم الخادم:", type: "boolean", defaultValue: true }, {key: "everyone", label: "كتم @everyone:", type: "boolean", defaultValue: true } ] },
             { name: "PlainFolderIcon", description: "إخفاء أيقونات الخوادم الصغيرة داخل المجلدات", author: "botato" },
             { name: "PlatformIndicators", description: "إظهار مؤشرات المنصة (سطح مكتب، موبايل) للمستخدمين", author: "kemo et al." },
             { name: "RoleColorEverywhere", description: "تطبيق لون أعلى دور للمستخدم في أماكن أكثر", author: "King Fish et al." },
             { name: "ShowConnections", description: "إظهار الحسابات المتصلة في نافذة المستخدم", author: "TheKodeToad" },
             { name: "ShowHiddenChannels", description: "إظهار القنوات المخفية (التي لا تملك صلاحية الوصول إليها)", author: "BigDuck et al." },
             { name: "ShowMeYourName", description: "عرض اسم المستخدم بجانب اللقب (أو بدونه)", author: "Rini, TheKodeToad" },
             { name: "ShowTimeoutDuration", description: "عرض مدة المهلة المتبقية للمستخدم", author: "Vee, Sqaaakoi" },
             { name: "ThemeAttributes", description: "إضافة سمات HTML إضافية للعناصر لتسهيل التخصيص عبر CSS", author: "Vee, BoardTM" },
             { name: "TypingIndicator", description: "عرض مؤشر الكتابة بجانب اسم القناة", author: "Nuckyz et al." },
             { name: "TypingTweaks", description: "إظهار الصور الرمزية وألوان الأدوار في مؤشر الكتابة", author: "zt" },
             { name: "USRBG", description: "عرض خلفيات المستخدمين من خدمة USRBG", author: "AutumnVN et al." },
             { name: "UserMessagesPronouns", description: "إظهار الضمائر بجانب أسماء المستخدمين في الرسائل", author: "Tyman et al." },
             { name: "UserVoiceShow", description: "إظهار مؤشر عند تواجد المستخدم في قناة صوتية بأماكن مختلفة", author: "Nuckyz, LordElias" },
             { name: "VencordToolbox", description: "إضافة صندوق أدوات Vencord بجانب صندوق الوارد", author: "Vee, AutumnVN" },
             { name: "ViewIcons", description: "عرض أيقونات المستخدم/الخادم/المجموعة في قائمة السياق والنقر عليها", author: "Vee et al." },
             { name: "PinDMs", description: "تثبيت الرسائل المباشرة والمجموعات في الأعلى", author: "Vee, Syncxv", configurableSettings: [{key: "pinOrder", label: "ترتيب المثبت:", type: "number", defaultValue: 0}] },

             // --- Chat & Messaging ---
             { name: "BetterGifAltText", description: "تغيير النص البديل لـ GIF ليحتوي على معلومات مفيدة", author: "Vee" },
             { name: "BetterGifPicker", description: "جعل منتقي GIF يفتح فئة المفضلة افتراضيًا", author: "Samwich" },
             { name: "BetterNotesBox", description: "إخفاء الملاحظات أو تعطيل التدقيق الإملائي فيها", author: "Vee" },
             { name: "CtrlEnterSend", description: "استخدام Ctrl+Enter لإرسال الرسائل", author: "Vendicated" }, // Changed author for consistency
             { name: "FavoriteEmojiFirst", description: "عرض الرموز التعبيرية المفضلة أولاً في الإكمال التلقائي", author: "Syncxv, Vee" },
             { name: "FavoriteGifSearch", description: "إضافة شريط بحث لصور GIF المفضلة", author: "Syncxv" },
             { name: "FixCodeblockGap", description: "إزالة الفجوة أسفل كتل الأكواد", author: "Grzesiek11" },
             { name: "FullSearchContext", description: "إظهار قائمة سياق الرسالة الكاملة في نتائج البحث", author: "Vee, Syncxv" },
             { name: "FullUserInChatbox", description: "جعل @إشارة المستخدم في مربع الدردشة قابلة للتفاعل", author: "sadan" },
             { name: "GifPaste", description: "لصق رابط GIF بدلاً من إرساله مباشرة عند الاختيار", author: "Vee" },
             { name: "GreetStickerPicker", description: "اختيار ملصق الترحيب بدلًا من إرسال عشوائي", author: "Vee" },
             { name: "IrcColors", description: "تطبيق ألوان فريدة على أسماء المستخدمين في الدردشة", author: "Grzesiek11, jamesbt365" },
             { name: "MentionAvatars", description: "إظهار الصور الرمزية وأيقونات الأدوار داخل الإشارات (@)", author: "Vee, SerStars" },
             { name: "MessageClickActions", description: "تعديل/حذف/رد على الرسائل عبر نقرات/اختصارات", author: "Vee" },
             { name: "MessageLatency", description: "عرض مؤشر للرسائل التي تأخر إرسالها", author: "arHSM" },
             { name: "MessageLinkEmbeds", description: "إضافة معاينة للرسائل التي تحتوي على رابط لرسالة أخرى", author: "sunnie et al." },
             { name: "MessageLogger", description: "تسجيل الرسائل المحذوفة والمعدلة مؤقتًا", author: "rushii et al.", configurableSettings: [ {key: "logEdits", label: "تسجيل التعديلات:", type: "boolean", defaultValue: true}, {key: "logDeletes", label: "تسجيل الحذف:", type: "boolean", defaultValue: true} ] },
             { name: "MessageTags", description: "حفظ رسائل لاستخدامها لاحقًا عبر أمر", author: "Luny" },
             { name: "MoreCommands", description: "إضافة أوامر مثل /echo, /lenny, /mock", author: "ArjixWasTaken et al." },
             { name: "MoreKaomoji", description: "إضافة المزيد من ال Kaomoji ヽ(´▽`)/", author: "Jacob.Tm" },
             { name: "NoBlockedMessages", description: "إخفاء رسائل المستخدمين المحظورين تمامًا", author: "rushii et al." },
             { name: "NoMaskedUrlPaste", description: "منع لصق الروابط كنص مخفي عند تحديد نص آخر", author: "CatNoir" },
             { name: "NoReplyMention", description: "تعطيل إشارة الرد (@) افتراضيًا", author: "DustyAngel47 et al." },
             { name: "NoServerEmojis", description: "عدم عرض رموز الخادم التعبيرية في قائمة الإكمال التلقائي", author: "UlyssesZhan" },
             { name: "NoTypingAnimation", description: "تعطيل الرسوم المتحركة لنقاط الكتابة", author: "AutumnVN" },
             { name: "PreviewMessage", description: "معاينة الرسالة قبل إرسالها", author: "Syncxv" },
             { name: "QuickMention", description: "إضافة زر إشارة سريعة إلى شريط إجراءات الرسالة", author: "kemo" },
             { name: "QuickReply", description: "الرد/التعديل على الرسائل عبر اختصارات لوحة المفاتيح", author: "fawn et al." },
             { name: "ReplyTimestamp", description: "إظهار الطابع الزمني في معاينة الردود", author: "Kyuuhachi" },
             { name: "RevealAllSpoilers", description: "كشف جميع المفسدات (Spoilers) في رسالة عبر اختصار", author: "whqwert" },
             { name: "SendTimestamps", description: "إرسال طوابع زمنية بسهولة عبر زر واختصارات", author: "Vee et al." },
             { name: "ShikiCodeblocks", description: "تلوين كتل الأكواد باستخدام Shiki (مثل VSCode)", author: "Vap0r1ze", target: "desktop" }, // Added target
             { name: "ShowAllMessageButtons", description: "إظهار جميع أزرار الرسائل دائمًا (بدون الحاجة لـ Shift)", author: "Nuckyz" },
             { name: "SilentMessageToggle", description: "إضافة زر لتبديل إرسال الرسالة بصمت (@silent)", author: "Nuckyz, CatNoir" },
             { name: "SilentTyping", description: "إخفاء مؤشر الكتابة الخاص بك", author: "Vee et al." },
             { name: "StickerPaste", description: "لصق رابط الملصق بدلًا من إرساله مباشرة", author: "Im_Banana" },
             { name: "SuperReactionTweaks", description: "تخصيص ردود الفعل الفائقة (Super Reactions)", author: "Fiery, ant0n" },
             { name: "TextReplace", description: "استبدال النص في رسائلك بناءً على قواعد محددة", author: "AutumnVN, TheKodeToad" },
             { name: "Translate", description: "ترجمة الرسائل باستخدام Google Translate أو DeepL", author: "Vee, AshtonMemer", configurableSettings: [{key: "service", label:"خدمة الترجمة:", type:"select", options:["google", "deepl"], defaultValue:"google"}, {key:"receivedOutput", label:"لغة الترجمة:", type:"text", defaultValue:"ar"}] }, // Added Translate settings
             { name: "Unindent", description: "إزالة المسافة البادئة الزائدة من كتل الأكواد", author: "Vee" },
             { name: "UnsuppressEmbeds", description: "إلغاء قمع (إظهار) التضمينات المخفية", author: "rad, HypedDomi" },
             { name: "ValidReply", description: "إصلاح مشكلة 'تعذر تحميل الرسالة' عند التحويم فوق الردود القديمة", author: "newwares" },
             { name: "ValidUser", description: "إصلاح ظهور '@unknown-user' للمستخدمين غير المعروفين", author: "Vee, Dolfies" },
             { name: "VoiceMessages", description: "إرسال رسائل صوتية (عبر النقر الأيمن على زر الرفع)", author: "Vee et al." },
             { name: "WhoReacted", description: "عرض صور المستخدمين المتفاعلين أسفل الرسالة", author: "Vee et al." },

             // --- Media & Embeds ---
             // { name: "BetterGifAltText", description: "تغيير النص البديل لـ GIF ليحتوي على معلومات مفيدة", author: "Vee" }, // Note: Also categorized under Chat
             { name: "BiggerStreamPreview", description: "تكبير معاينات البث المباشر", author: "phil" },
             { name: "BlurNSFW", description: "تمويه المرفقات في قنوات NSFW", author: "Vee" },
             { name: "Dearrow", description: "إزالة العناوين والصور المصغرة المضللة من تضمينات YouTube", author: "Vee" },
             { name: "FixImagesQuality", description: "منع تحميل الصور كـ WebP للحفاظ على الجودة", author: "Nuckyz" },
             { name: "FixSpotifyEmbeds", description: "إصلاح مشكلة الصوت العالي في تضمينات Spotify", author: "Vee", target: "desktop" },
             { name: "FixYoutubeEmbeds", description: "تجاوز حظر عرض بعض تضمينات YouTube", author: "coolelectronics", target: "desktop" },
             { name: "HideMedia", description: "إخفاء المرفقات والتضمينات لرسالة محددة", author: "Vee" },
             { name: "ImageLink", description: "إظهار رابط الصورة دائمًا حتى لو كانت هي المحتوى الوحيد", author: "Kyuuhachi, Sqaaakoi" },
             { name: "ImageZoom", description: "تكبير الصور وصور GIF باستخدام عجلة الماوس", author: "Syncxv" },
             { name: "NoMosaic", description: "إزالة تأثير الفسيفساء للصور المتعددة", author: "AutumnVN" },
             { name: "PictureInPicture", description: "إضافة زر صورة داخل صورة لمقاطع الفيديو", author: "Lumap" },
             { name: "ReverseImageSearch", description: "إضافة خيار البحث العكسي عن الصور في قائمة السياق", author: "Vee, Nuckyz" },
             { name: "YoutubeAdblock", description: "منع إعلانات YouTube (نسخة الويب)", author: "Vendicated" },
             { name: "YoutubeAdblock.desktop", description: "منع إعلانات YouTube (نسخة سطح المكتب)", author: "Vendicated" },

             // --- Profiles & Information ---
             { name: "AccountPanelServerProfile", description: "عرض ملف الخادم الشخصي عبر النقر الأيمن على لوحة الحساب", author: "Nuckyz, Relitrix" },
             { name: "BetterSessions", description: "تحسين قائمة الجلسات (الأجهزة المسجلة)", author: "amia" },
             { name: "CopyUserURLs", description: "نسخ رابط ملف المستخدم (discord.com/users/ID)", author: "castdrian" },
             { name: "FriendsSince", description: "إظهار تاريخ بدء الصداقة في نافذة المستخدم", author: "Elvyra, Antti" },
             { name: "ImplicitRelationships", description: "إظهار العلاقات الضمنية (مثل الخوادم المشتركة) في تبويب الأصدقاء", author: "Dolfies" },
             { name: "MutualGroupDMs", description: "إظهار المجموعات المشتركة في ملفات تعريف المستخدمين", author: "amia" },
             { name: "PermissionsViewer", description: "عرض صلاحيات المستخدم/القناة وأدوار الخادم", author: "Nuckyz, Vee" },
             { name: "RelationshipNotifier", description: "إشعار عند إزالتك من صديق/مجموعة/خادم", author: "nick" },
             { name: "ReviewDB", description: "مراجعة المستخدمين الآخرين (يضيف تبويب جديد للملف الشخصي)", author: "mantikafasi, Vee" },
             { name: "ServerInfo", description: "عرض معلومات تفصيلية عن الخادم", author: "Vee, Nuckyz" },
             { name: "SortFriendRequests", description: "فرز طلبات الصداقة حسب التاريخ", author: "Megumin" },
             { name: "UnlockedAvatarZoom", description: "تكبير الصورة الرمزية بشكل أكبر عند التعديل", author: "nakoyasha" },

             // --- Privacy & Security ---
             { name: "AlwaysTrust", description: "إزالة نافذة تحذير الروابط والملفات المشبوهة", author: "zt, trey" },
             { name: "AnonymiseFileNames", description: "تغيير أسماء الملفات عند الرفع للحفاظ على الخصوصية", author: "fawn" },
             { name: "ClearURLs", description: "إزالة معلمات التتبع من عناوين URL", author: "Vendicated" },
             { name: "ConsoleJanitor", description: "إزالة رسائل وحدة التحكم المزعجة وغير الضرورية", author: "Vendicated" },
             { name: "iLoveSpam", description: "عدم إخفاء رسائل 'مرسلي الرسائل غير المرغوب فيها المحتملين'", author: "botato, nyako" },
             { name: "InvisibleChat", description: "تشفير الرسائل باستخدام طريقة غير مرئية (يتطلب توافق)", author: "Samm-Cheese", target: "desktop" },
             { name: "NoDevtoolsWarning", description: "إزالة تحذير 'HOLD UP!' في وحدة التحكم ومنع تسجيل الخروج العشوائي", author: "Vee" },
             { name: "NoRPC", description: "تعطيل خادم Discord RPC", author: "Cynosphere", target: "discordDesktop" }, // Specific target
             { name: "NSFWGateBypass", description: "تجاوز بوابة تأكيد العمر لقنوات NSFW", author: "Commandtechno" },

             // --- Tools & Utilities (including APIs) ---
             { name: "CallTimer", description: "إظهار مدة المكالمة الحالية", author: "Vendicated, Fiery", configurableSettings: [ { key: "format", label: "تنسيق الوقت:", type: "select", options: ["stopwatch", "timer"], defaultValue: "stopwatch" } ] },
             { name: "ConsoleShortcuts", description: "إضافة اختصارات مفيدة إلى وحدة تحكم المطور", author: "Vee" },
             { name: "CopyEmojiMarkdown", description: "نسخ الرموز التعبيرية بتنسيق Markdown", author: "Vendicated" }, // Changed author
             { name: "CopyFileContents", description: "نسخ محتويات الملفات النصية المرفقة", author: "Vendicated" }, // Changed author
             { name: "CustomIdle", description: "تخصيص وقت الخمول التلقائي (أو تعطيله)", author: "newwares" },
             { name: "CustomRPC", description: "إضافة حالة نشاط مخصصة (RPC)", author: "Captain et al." }, // Simplified author
             { name: "DevCompanion", description: "أدوات مساعدة لمطوري Vencord", author: "Vee", target: "dev" }, // Specific target
             { name: "DisableCallIdle", description: "منع الخمول التلقائي في المكالمات الصوتية", author: "Nuckyz" },
             { name: "DontRoundMyTimestamps", description: "عرض الطوابع الزمنية النسبية بدقة أكبر (عدم التقريب لأعلى)", author: "Lexi" },
             { name: "Experiments", description: "الوصول إلى ميزات Discord التجريبية", author: "Vendicated" }, // Changed author
             { name: "F8Break", description: "إيقاف العميل مؤقتًا عند الضغط على F8 (مع أدوات المطور)", author: "lewisakura" },
             { name: "GameActivityToggle", description: "إضافة زر لتبديل عرض نشاط اللعبة", author: "Nuckyz, RuukuLada", configurableSettings: [ {key: "oldIcon", label: "أيقونة قديمة:", type:"boolean", defaultValue: false}] },
             { name: "IgnoreActivities", description: "تجاهل عرض أنشطة معينة في حالتك", author: "Nuckyz, Cookie" },
             { name: "KeepCurrentChannel", description: "محاولة العودة إلى القناة السابقة عند بدء التشغيل/تبديل الحساب", author: "Nuckyz" },
             { name: "LoadingQuotes", description: "استبدال اقتباسات شاشة التحميل", author: "Vee et al." },
             { name: "NormalizeMessageLinks", description: "إزالة canary/ptb من روابط الرسائل", author: "bb010g" },
             { name: "NoF1", description: "تعطيل اختصار F1 لفتح صفحة المساعدة", author: "Cynosphere" },
             { name: "NoOnboardingDelay", description: "تخطي التأخير المزعج عند الانضمام لخادم لأول مرة", author: "nekohaxx" },
             { name: "NoPendingCount", description: "إخفاء عدد الإشعارات المعلقة (طلبات صداقة، إلخ)", author: "amia" },
             { name: "NoProfileThemes", description: "إخفاء سمات الملفات الشخصية للآخرين (باستثناء نفسك)", author: "TheKodeToad" },
             { name: "NoSystemBadge", description: "تعطيل شارة العدد غير المقروء في شريط المهام/صينية النظام", author: "rushii", target: "discordDesktop" },
             { name: "NotificationVolume", description: "تعيين مستوى صوت منفصل للإشعارات", author: "philipbry" },
             { name: "NoUnblockToJump", description: "الانتقال لرسائل المحظورين دون الحاجة لإلغاء الحظر", author: "dzshn" },
             { name: "OpenInApp", description: "فتح الروابط في تطبيقاتها المخصصة بدلًا من المتصفح", author: "Vee, Chloe" },
             { name: "OverrideForumDefaults", description: "تجاوز إعدادات العرض والفرز الافتراضية للمنتديات", author: "Inbestigator" },
             { name: "PauseInvitesForever", description: "إعادة خيار إيقاف الدعوات مؤقتًا إلى الأبد", author: "Dolfies, amia" },
             { name: "PermissionFreeWill", description: "تعطيل قيود واجهة المستخدم عند إدارة الصلاحيات", author: "lewisakura" },
             { name: "ReadAllNotificationsButton", description: "إضافة زر لقراءة جميع إشعارات الخوادم", author: "kemo" },
             { name: "ReactErrorDecoder", description: "فك تشفير أخطاء React المصغرة لعرض الخطأ الفعلي", author: "Cynosphere, maisy" },
             { name: "ReplaceGoogleSearch", description: "استبدال البحث عبر Google في قائمة السياق بمحركات أخرى", author: "Moxxie, Ethan" },
             { name: "ServerListIndicators", description: "عرض مؤشرات (عدد الأصدقاء المتصلين/الخوادم) في قائمة الخوادم", author: "dzshn" },
             { name: "ShowHiddenThings", description: "عرض معلومات مخفية/خاصة بالمدراء (مثل المهلات، الدعوات الموقوفة)", author: "Dolfies" },
             { name: "StartupTimings", description: "إظهار توقيتات بدء تشغيل Vencord في الإعدادات", author: "Megumin" },
             { name: "StreamerModeOnStream", description: "تفعيل وضع الاستريمر تلقائيًا عند بدء البث", author: "Kodarru" },
             { name: "Summaries", description: "تفعيل ملخصات المحادثات التجريبية (AI)", author: "mantikafasi" },
             { name: "VcNarrator", description: "إعلان صوتي عند دخول/خروج المستخدمين من القنوات الصوتية", author: "Vee" },
             { name: "ViewRaw", description: "عرض/نسخ البيانات الأولية للرسائل/القنوات/الخوادم", author: "King Fish et al." },
             { name: "VoiceChatDoubleClick", description: "الانضمام للقنوات الصوتية بالنقر المزدوج بدلًا من المفرد", author: "Vee, D3SOX" },
             { name: "VoiceDownload", description: "إضافة زر لتنزيل الرسائل الصوتية", author: "puv" },
             { name: "VolumeBooster", description: "رفع مستوى الصوت أعلى من الحد الأقصى", author: "Nuckyz, sadan", configurableSettings: [ { key: "multiplier", label: "معامل الضرب:", type: "number", defaultValue: 2, min: 1, max: 10, step: 0.5 } ] },
             { name: "WebContextMenus.web", description: "إعادة قوائم السياق المفقودة في نسخة الويب", author: "Vee", target: "web" },
             { name: "WebKeybinds.web", description: "إعادة اختصارات لوحة المفاتيح المفقودة في نسخة الويب", author: "Vee", target: "web" },
             { name: "WebScreenShareFixes.web", description: "إصلاحات لمشاركة الشاشة في نسخة الويب (Vesktop)", author: "kaitlyn", target: "web" },
             { name: "XSOverlay", description: "إرسال إشعارات Discord إلى XSOverlay (لـ VR)", author: "nyako" }, // Added target? Assume desktop/any
             // --- Newly Added APIs ---
             { name: "ChatInputButtonAPI", description: "API لإضافة أزرار إلى مربع إدخال الدردشة", author: "Vencord API" },
             { name: "CommandsAPI", description: "API لتسجيل أوامر الشرطة المائلة (/)", author: "Vencord API" },
             { name: "MemberListDecoratorsAPI", description: "API لإضافة عناصر إلى قائمة الأعضاء", author: "Vencord API" },
             { name: "MessageAccessoriesAPI", description: "API لإضافة ملحقات إلى الرسائل", author: "Vencord API" },
             { name: "MessageDecorationsAPI", description: "API لإضافة زينة إلى الرسائل", author: "Vencord API" },
             { name: "MessageEventsAPI", description: "API للتفاعل مع أحداث الرسائل", author: "Vencord API" },
             { name: "MessagePopoverAPI", description: "API لتعديل النافذة المنبثقة للرسائل", author: "Vencord API" },
             { name: "MessageUpdaterAPI", description: "API لتحديث محتوى الرسائل ديناميكيًا", author: "Vencord API" },
             { name: "ServerListAPI", description: "API للتفاعل مع قائمة الخوادم", author: "Vencord API" },
             { name: "UserSettingsAPI", description: "API لإضافة إعدادات إلى واجهة Vencord", author: "Vencord API" },
             { name: "DynamicImageModalAPI", description: "API لعرض الصور في نافذة منبثقة ديناميكية", author: "Vencord API" },
             { name: "BadgeAPI", description: "API لإضافة شارات مخصصة للمستخدمين", author: "Vencord API" },
             { name: "FriendInvites", description: "إنشاء وإدارة روابط دعوة الأصدقاء عبر الأوامر", author: "afn, Dziurwa" }, // Added FriendInvites

            // --- External Services ---
             { name: "AppleMusicRichPresence", description: "حالة ديسكورد غنية لـ Apple Music!", author: "RyanCaoDev", target: "desktop" }, // Added target
             { name: "LastFMRichPresence", description: "إظهار ما تستمع إليه على Last.fm كحالة نشاط", author: "dzshn et al." },
             { name: "SpotifyControls", description: "إضافة عناصر تحكم Spotify أسفل الواجهة", author: "Vee et al." },
             { name: "SpotifyCrack", description: "ميزات إضافية لـ Spotify (استماع مع الأصدقاء مجانًا، إلخ)", author: "Cynosphere, Nuckyz" },
             { name: "SpotifyShareCommands", description: "أوامر لمشاركة ما تستمع إليه على Spotify", author: "katlyn" },
             { name: "WebRichPresence (arRPC).web", description: "تمكين RPC لنسخة الويب باستخدام arRPC", author: "Ducko", target: "web" },

             // --- Fun & Miscellaneous ---
             { name: "BANger", description: "استبدال صورة GIF في مربع حوار الحظر بصورة مخصصة.", author: "Xinto, Glitchy" },
             { name: "Moyai", description: "🗿", author: "Megumin, Nuckyz" },
             { name: "oneko", description: "قطة تتبع مؤشر الماوس", author: "Vee, adryd" },
             { name: "OnePingPerDM", description: "تحديد عدد التنبيهات الصوتية من نفس الرسالة المباشرة", author: "ProffDea" },
             { name: "PartyMode", description: "تفعيل وضع الحفلة (تأثيرات بصرية)", author: "UwU" },
             { name: "petpet", description: "إنشاء صور GIF تفاعلية عبر أمر /petpet", author: "Vee" },
             { name: "SecretRingToneEnabler", description: "تشغيل نغمة الرنين السرية دائمًا", author: "Andrew-DLO et al." },

        ];

        // --- De-duplicate and Prepare Data ---
        const uniquePluginsMap = new Map();
        initialPluginsData.forEach(plugin => {
            if (!uniquePluginsMap.has(plugin.name)) { uniquePluginsMap.set(plugin.name, plugin); }
            else { const existing = uniquePluginsMap.get(plugin.name); if (plugin.configurableSettings && !existing.configurableSettings) { uniquePluginsMap.set(plugin.name, plugin); } }
        });
        const pluginsData = Array.from(uniquePluginsMap.values());

        // --- Categorize Plugins ---
        const categorizedPlugins = { /* ... (categories as before) ... */
             "🌟 أساسي": [], "💎 ميزات نيترو": [], "💅 تحسينات الواجهة": [], "💬 الدردشة والرسائل": [], "🖼️ الوسائط والتضمينات": [], "👤 الملفات الشخصية والمعلومات": [], "🔒 الخصوصية والأمان": [], "🔗 خدمات خارجية": [], "🛠️ أدوات ومساعدة (APIs)": [], "🎉 متنوع ومرح": [],
        };
        pluginsData.forEach(plugin => { /* ... (categorization logic as before) ... */
            const nameLower = plugin.name.toLowerCase(); const descLower = plugin.description.toLowerCase();
            if (requiredPlugins.includes(plugin.name)) categorizedPlugins["🌟 أساسي"].push(plugin);
            else if (nameLower.includes("nitro") || nameLower.includes("emotecloner") || nameLower.includes("fakeprofilethemes") || nameLower.includes("decor") || nameLower.includes("sticker")) categorizedPlugins["💎 ميزات نيترو"].push(plugin);
            else if (nameLower.includes("theme") || nameLower.includes("folder") || nameLower.includes("setting") || nameLower.includes("role") || nameLower.includes("indicator") || nameLower.includes("expand") || nameLower.includes("dot") || nameLower.includes("upload") || nameLower.includes("count") || nameLower.includes("ui") || nameLower.includes("colorsighted") || nameLower.includes("crown") || nameLower.includes("pindms")) categorizedPlugins["💅 تحسينات الواجهة"].push(plugin);
            else if (nameLower.includes("chat") || nameLower.includes("message") || nameLower.includes("reply") || nameLower.includes("typing") || nameLower.includes("send") || nameLower.includes("translate") || nameLower.includes("markdown") || nameLower.includes("notes") || nameLower.includes("mention") || nameLower.includes("kaomoji") || nameLower.includes("command") || nameLower.includes("logger") || nameLower.includes("unsuppress") || nameLower.includes("unindent") || nameLower.includes("tag") || nameLower.includes("spoiler")) categorizedPlugins["💬 الدردشة والرسائل"].push(plugin);
            else if (nameLower.includes("youtube") || nameLower.includes("gif") || nameLower.includes("embed") || nameLower.includes("image") || nameLower.includes("stream") || nameLower.includes("blur") || nameLower.includes("media") || nameLower.includes("mosaic") || nameLower.includes("animate") || nameLower.includes("video") || nameLower.includes("pictureinpicture")) categorizedPlugins["🖼️ الوسائط والتضمينات"].push(plugin);
            else if (nameLower.includes("profile") || nameLower.includes("user") || nameLower.includes("author") || nameLower.includes("session") || nameLower.includes("permission") || nameLower.includes("account") || nameLower.includes("badge") || nameLower.includes("relationship") || nameLower.includes("connection") || nameLower.includes("friend") || nameLower.includes("avatar") || nameLower.includes("usrbg") || nameLower.includes("info") || nameLower.includes("pronoun")) categorizedPlugins["👤 الملفات الشخصية والمعلومات"].push(plugin);
            else if (nameLower.includes("track") || nameLower.includes("privacy") || nameLower.includes("secure") || nameLower.includes("trust") || nameLower.includes("anonymise") || nameLower.includes("console") || nameLower.includes("clearurls") || nameLower.includes("nsfw") || nameLower.includes("block") || nameLower.includes("devtools") || nameLower.includes("rpc") || nameLower.includes("spam")) categorizedPlugins["🔒 الخصوصية والأمان"].push(plugin);
            else if (nameLower.includes("spotify") || nameLower.includes("apple") || nameLower.includes("lastfm") || nameLower.includes("rpc")) categorizedPlugins["🔗 خدمات خارجية"].push(plugin);
            else if (nameLower.includes("util") || nameLower.includes("tool") || nameLower.includes("dev") || nameLower.includes("experiment") || nameLower.includes("volume") || nameLower.includes("idle") || nameLower.includes("timer") || nameLower.includes("copy") || nameLower.includes("shortcut") || nameLower.includes("crash") || nameLower.includes("debug") || nameLower.includes("f8") || nameLower.includes("voice") || nameLower.includes("timestamp") || nameLower.includes("raw") || nameLower.includes("web") || nameLower.includes("quality") || nameLower.includes("xsoverlay") || nameLower.includes("replace") || nameLower.includes("api")) categorizedPlugins["🛠️ أدوات ومساعدة (APIs)"].push(plugin); // Catch APIs here
            else categorizedPlugins["🎉 متنوع ومرح"].push(plugin);
        });


        // --- إنشاء عناصر الإضافات (مع الفئات) ---
        function createPlugins() { /* ... (createPlugins logic remains the same) ... */
             const container = document.querySelector('.plugins-container'); if (!container) { console.error("Plugin container not found."); return; } container.innerHTML = '';
             Object.entries(categorizedPlugins).forEach(([categoryName, pluginsInCategory]) => {
                 if (pluginsInCategory.length === 0) return; pluginsInCategory.sort((a, b) => a.name.localeCompare(b.name));
                 const categoryHeader = document.createElement('h2'); categoryHeader.className = 'category-header'; categoryHeader.textContent = categoryName; container.appendChild(categoryHeader);
                 const pluginGrid = document.createElement('div'); pluginGrid.className = 'plugins-grid';
                 pluginsInCategory.forEach(plugin => {
                     const pluginDiv = document.createElement('div'); pluginDiv.className = 'plugin'; if (requiredPlugins.includes(plugin.name)) { pluginDiv.classList.add('required-core-plugin'); }
                     const checkbox = document.createElement('input'); checkbox.type = 'checkbox'; checkbox.dataset.pluginName = plugin.name; checkbox.className = 'plugin-checkbox'; checkbox.setAttribute('aria-label', `تفعيل/تعطيل ${plugin.name}`); if (requiredPlugins.includes(plugin.name)) { checkbox.checked = true; checkbox.disabled = true; } pluginDiv.appendChild(checkbox);
                     const pluginContent = document.createElement('div'); pluginContent.className = 'plugin-content'; const pluginLinkContainer = document.createElement('div'); pluginLinkContainer.className = 'plugin-link'; const pluginTitle = document.createElement('h3'); pluginTitle.textContent = plugin.name; pluginTitle.className = 'ellipsis-overflow'; pluginLinkContainer.appendChild(pluginTitle); pluginContent.appendChild(pluginLinkContainer); const authorSpan = document.createElement('span'); authorSpan.className = 'author ellipsis-overflow'; authorSpan.textContent = plugin.author || 'غير معروف'; pluginContent.appendChild(authorSpan); const descriptionP = document.createElement('p'); descriptionP.className = 'description'; descriptionP.textContent = plugin.description || 'لا يوجد وصف.'; pluginContent.appendChild(descriptionP);
                     if (plugin.configurableSettings && plugin.configurableSettings.length > 0) { const settingsDiv = document.createElement('div'); settingsDiv.className = 'plugin-settings'; plugin.configurableSettings.forEach(setting => { const settingWrapper = document.createElement('div'); settingWrapper.className = 'plugin-setting'; const label = document.createElement('label'); label.textContent = setting.label; let inputElement; const inputId = `${plugin.name}-${setting.key}-${Math.random().toString(36).substring(7)}`; label.htmlFor = inputId; switch (setting.type) { case 'boolean': inputElement = document.createElement('input'); inputElement.type = 'checkbox'; inputElement.checked = setting.defaultValue; inputElement.id = inputId; settingWrapper.appendChild(inputElement); settingWrapper.appendChild(label); break; case 'number': inputElement = document.createElement('input'); inputElement.type = 'number'; inputElement.value = setting.defaultValue; if (setting.min !== undefined) inputElement.min = setting.min; if (setting.max !== undefined) inputElement.max = setting.max; if (setting.step !== undefined) inputElement.step = setting.step; inputElement.id = inputId; settingWrapper.appendChild(label); settingWrapper.appendChild(inputElement); break; case 'color': inputElement = document.createElement('input'); inputElement.type = 'color'; inputElement.value = setting.defaultValue; inputElement.id = inputId; settingWrapper.appendChild(label); settingWrapper.appendChild(inputElement); break; case 'select': inputElement = document.createElement('select'); inputElement.id = inputId; (setting.options || []).forEach(opt => { const option = document.createElement('option'); option.value = opt; option.textContent = opt; if (opt === setting.defaultValue) option.selected = true; inputElement.appendChild(option); }); settingWrapper.appendChild(label); settingWrapper.appendChild(inputElement); break; default: inputElement = document.createElement('input'); inputElement.type = 'text'; inputElement.value = setting.defaultValue || ''; inputElement.id = inputId; settingWrapper.appendChild(label); settingWrapper.appendChild(inputElement); break; } if (inputElement) { inputElement.dataset.pluginName = plugin.name; inputElement.dataset.settingKey = setting.key; inputElement.addEventListener('click', (e) => e.stopPropagation()); inputElement.addEventListener('change', (e) => e.stopPropagation()); } if (setting.type === 'boolean') { label.addEventListener('click', (e) => e.stopPropagation()); } settingsDiv.appendChild(settingWrapper); }); pluginContent.appendChild(settingsDiv); }
                     pluginDiv.appendChild(pluginContent); pluginGrid.appendChild(pluginDiv);
                     if (!requiredPlugins.includes(plugin.name)) { pluginDiv.addEventListener('click', function(event) { if (event.target.closest('.plugin-setting') || event.target.matches('input[type="checkbox"].plugin-checkbox')) { return; } const mainCheckbox = this.querySelector('input[type="checkbox"].plugin-checkbox'); if (mainCheckbox && !mainCheckbox.disabled) { mainCheckbox.checked = !mainCheckbox.checked; mainCheckbox.dispatchEvent(new Event('change', { bubbles: true })); } }); }
                 });
                 container.appendChild(pluginGrid);
             });
             const loadingMsg = container.querySelector('p'); if (loadingMsg && loadingMsg.textContent.includes('جاري تحميل')) { container.removeChild(loadingMsg); }
        }

        // --- تنفيذ البحث والتصفية ---
        function setupSearch() { /* ... (search logic remains the same) ... */
             const searchInput = document.querySelector('.search input'); if (searchInput) { searchInput.addEventListener('input', function() { const searchTerm = this.value.toLowerCase().trim(); const plugins = document.querySelectorAll('.plugins-container .plugin'); let visibleCount = 0; plugins.forEach(plugin => { const pluginName = plugin.querySelector('h3')?.textContent.toLowerCase() || ''; const pluginDescription = plugin.querySelector('.description')?.textContent.toLowerCase() || ''; const pluginAuthor = plugin.querySelector('.author')?.textContent.toLowerCase() || ''; const matches = searchTerm === '' || pluginName.includes(searchTerm) || pluginDescription.includes(searchTerm) || pluginAuthor.includes(searchTerm); plugin.style.display = matches ? 'flex' : 'none'; if (matches) visibleCount++; }); document.querySelectorAll('h2.category-header').forEach(header => { const nextGrid = header.nextElementSibling; if (nextGrid && nextGrid.classList.contains('plugins-grid')) { const visiblePluginsInCategory = Array.from(nextGrid.children).some(p => p.style.display !== 'none'); header.style.display = visiblePluginsInCategory ? 'block' : 'none'; } }); let noResultsMsg = document.getElementById('no-results-message'); const container = document.querySelector('.plugins-container'); if (visibleCount === 0 && searchTerm !== '') { if (!noResultsMsg && container) { noResultsMsg = document.createElement('p'); noResultsMsg.id = 'no-results-message'; noResultsMsg.textContent = 'لم يتم العثور على إضافات مطابقة.'; noResultsMsg.style.textAlign = 'center'; noResultsMsg.style.marginTop = '2em'; container.appendChild(noResultsMsg); } else if (noResultsMsg) { noResultsMsg.style.display = 'block'; } } else if (noResultsMsg) { noResultsMsg.style.display = 'none'; } }); }
        }

        // --- إعداد أزرار التحديد (مع التعديلات المطلوبة) ---
        function setupSelectionButtons() {
           const allCheckboxesQuery = '.plugins-container .plugin:not(.required-core-plugin) input[type="checkbox"].plugin-checkbox';
           const allCheckboxes = document.querySelectorAll('.plugins-container .plugin input[type="checkbox"].plugin-checkbox'); // Select all for suggested logic

           const selectAllBtn = document.getElementById('selectAllBtn');
           if (selectAllBtn) { selectAllBtn.addEventListener('click', function() { document.querySelectorAll(allCheckboxesQuery).forEach(checkbox => { checkbox.checked = true; checkbox.dispatchEvent(new Event('change', { bubbles: true })); }); console.log('Selected all non-required.'); }); }

           // زر "تحديد المقترحة" - يستخدم JSON المحدد
           const selectSuggestedBtn = document.getElementById('selectSuggestedBtn');
           if (selectSuggestedBtn) {
             const suggestedConfigJson = `{ "settings": { "plugins": { "ChatInputButtonAPI": { "enabled": true }, "CommandsAPI": { "enabled": true }, "MemberListDecoratorsAPI": { "enabled": true }, "MessageAccessoriesAPI": { "enabled": true }, "MessageDecorationsAPI": { "enabled": true }, "MessageEventsAPI": { "enabled": true }, "MessagePopoverAPI": { "enabled": true }, "MessageUpdaterAPI": { "enabled": true }, "ServerListAPI": { "enabled": true }, "UserSettingsAPI": { "enabled": true }, "DynamicImageModalAPI": { "enabled": true }, "BadgeAPI": { "enabled": true }, "CrashHandler": { "enabled": true }, "Settings": { "enabled": true, "settingsLocation": "aboveNitro" }, "SupportHelper": { "enabled": true }, "NoTrack": { "enabled": true, "disableAnalytics": true }, "AccountPanelServerProfile": { "enabled": false }, "AlwaysAnimate": { "enabled": false }, "AlwaysExpandRoles": { "enabled": false }, "AlwaysTrust": { "enabled": false }, "AnonymiseFileNames": { "enabled": false }, "AppleMusicRichPresence": { "enabled": false }, "BANger": { "enabled": false }, "BetterFolders": { "enabled": false }, "BetterGifAltText": { "enabled": false }, "BetterGifPicker": { "enabled": false }, "BetterNotesBox": { "enabled": false }, "BetterRoleContext": { "enabled": false }, "BetterRoleDot": { "enabled": false }, "BetterSessions": { "enabled": false }, "BetterSettings": { "enabled": false }, "BetterUploadButton": { "enabled": false }, "BiggerStreamPreview": { "enabled": false }, "BlurNSFW": { "enabled": false }, "CallTimer": { "enabled": true }, "ClearURLs": { "enabled": true }, "ClientTheme": { "enabled": true }, "ColorSighted": { "enabled": false }, "ConsoleJanitor": { "enabled": false }, "ConsoleShortcuts": { "enabled": false }, "CopyEmojiMarkdown": { "enabled": false }, "CopyFileContents": { "enabled": false }, "CopyUserURLs": { "enabled": false }, "CtrlEnterSend": { "enabled": false }, "CustomIdle": { "enabled": false }, "CustomRPC": { "enabled": false }, "Dearrow": { "enabled": false }, "Decor": { "enabled": false }, "DevCompanion": { "enabled": false }, "DisableCallIdle": { "enabled": false }, "DontRoundMyTimestamps": { "enabled": false }, "EmoteCloner": { "enabled": true }, "Experiments": { "enabled": true }, "F8Break": { "enabled": false }, "FakeNitro": { "enabled": false }, "FakeProfileThemes": { "enabled": false }, "FavoriteEmojiFirst": { "enabled": false }, "FavoriteGifSearch": { "enabled": false }, "FixCodeblockGap": { "enabled": false }, "FixImagesQuality": { "enabled": true }, "FixSpotifyEmbeds": { "enabled": false }, "FixYoutubeEmbeds": { "enabled": false }, "ForceOwnerCrown": { "enabled": false }, "FriendInvites": { "enabled": false }, "FriendsSince": { "enabled": true }, "FullSearchContext": { "enabled": false }, "FullUserInChatbox": { "enabled": false }, "GameActivityToggle": { "enabled": true }, "GifPaste": { "enabled": false }, "GreetStickerPicker": { "enabled": false }, "HideMedia": { "enabled": false }, "IgnoreActivities": { "enabled": false }, "iLoveSpam": { "enabled": false }, "ImageLink": { "enabled": false }, "ImageZoom": { "enabled": false }, "ImplicitRelationships": { "enabled": false }, "InvisibleChat": { "enabled": false }, "IrcColors": { "enabled": false }, "KeepCurrentChannel": { "enabled": false }, "LastFMRichPresence": { "enabled": false }, "LoadingQuotes": { "enabled": false }, "MemberCount": { "enabled": false }, "MentionAvatars": { "enabled": false }, "MessageClickActions": { "enabled": false }, "MessageLatency": { "enabled": false }, "MessageLinkEmbeds": { "enabled": true }, "MessageLogger": { "enabled": false }, "MessageTags": { "enabled": false }, "MoreCommands": { "enabled": false }, "MoreKaomoji": { "enabled": false }, "Moyai": { "enabled": false }, "MutualGroupDMs": { "enabled": false }, "NewGuildSettings": { "enabled": true }, "NoBlockedMessages": { "enabled": false }, "NoDevtoolsWarning": { "enabled": false }, "NoF1": { "enabled": false }, "NoMaskedUrlPaste": { "enabled": false }, "NoMosaic": { "enabled": false }, "NoOnboardingDelay": { "enabled": false }, "NoPendingCount": { "enabled": false }, "NoProfileThemes": { "enabled": false }, "NoReplyMention": { "enabled": false }, "NormalizeMessageLinks": { "enabled": false }, "NoRPC": { "enabled": false }, "NoServerEmojis": { "enabled": false }, "NoSystemBadge": { "enabled": false }, "NotificationVolume": { "enabled": false }, "NoTypingAnimation": { "enabled": true }, "NoUnblockToJump": { "enabled": true }, "NSFWGateBypass": { "enabled": false }, "oneko": { "enabled": false }, "OnePingPerDM": { "enabled": false }, "OpenInApp": { "enabled": true }, "OverrideForumDefaults": { "enabled": false }, "PartyMode": { "enabled": false }, "PauseInvitesForever": { "enabled": false }, "PermissionFreeWill": { "enabled": false }, "PermissionsViewer": { "enabled": false }, "petpet": { "enabled": false }, "PictureInPicture": { "enabled": false }, "PinDMs": { "enabled": true }, "PlainFolderIcon": { "enabled": false }, "PlatformIndicators": { "enabled": false }, "PreviewMessage": { "enabled": true }, "QuickMention": { "enabled": false }, "QuickReply": { "enabled": false }, "ReactErrorDecoder": { "enabled": false }, "ReadAllNotificationsButton": { "enabled": true }, "RelationshipNotifier": { "enabled": true }, "ReplaceGoogleSearch": { "enabled": false }, "ReplyTimestamp": { "enabled": false }, "RevealAllSpoilers": { "enabled": false }, "ReverseImageSearch": { "enabled": true }, "ReviewDB": { "enabled": false }, "RoleColorEverywhere": { "enabled": false }, "SecretRingToneEnabler": { "enabled": false }, "SendTimestamps": { "enabled": true }, "ServerInfo": { "enabled": true }, "ServerListIndicators": { "enabled": false }, "ShikiCodeblocks": { "enabled": false }, "ShowAllMessageButtons": { "enabled": false }, "ShowConnections": { "enabled": true }, "ShowHiddenChannels": { "enabled": false }, "ShowHiddenThings": { "enabled": false }, "ShowMeYourName": { "enabled": false }, "ShowTimeoutDuration": { "enabled": false }, "SilentMessageToggle": { "enabled": false }, "SilentTyping": { "enabled": false }, "SortFriendRequests": { "enabled": false }, "SpotifyControls": { "enabled": false }, "SpotifyCrack": { "enabled": false }, "SpotifyShareCommands": { "enabled": false }, "StartupTimings": { "enabled": false }, "StickerPaste": { "enabled": false }, "StreamerModeOnStream": { "enabled": false }, "Summaries": { "enabled": false }, "SuperReactionTweaks": { "enabled": false }, "TextReplace": { "enabled": false }, "ThemeAttributes": { "enabled": false }, "TimeBarAllActivities": { "enabled": false }, "Translate": { "enabled": true }, "TypingIndicator": { "enabled": false }, "TypingTweaks": { "enabled": false }, "Unindent": { "enabled": false }, "UnlockedAvatarZoom": { "enabled": false }, "UnsuppressEmbeds": { "enabled": false }, "UserMessagesPronouns": { "enabled": false }, "UserVoiceShow": { "enabled": true }, "USRBG": { "enabled": false }, "ValidReply": { "enabled": true }, "ValidUser": { "enabled": true }, "VcNarrator": { "enabled": false }, "VencordToolbox": { "enabled": false }, "ViewIcons": { "enabled": true }, "ViewRaw": { "enabled": false }, "VoiceChatDoubleClick": { "enabled": false }, "VoiceDownload": { "enabled": true }, "VoiceMessages": { "enabled": true }, "VolumeBooster": { "enabled": true }, "WebContextMenus.web": { "enabled": false }, "WebKeybinds.web": { "enabled": false }, "WebRichPresence (arRPC).web": { "enabled": false }, "WebScreenShareFixes.web": { "enabled": false }, "WhoReacted": { "enabled": false }, "XSOverlay": { "enabled": false }, "YoutubeAdblock.desktop": { "enabled": true }, "YoutubeAdblock": { "enabled": false } } } }`;

             selectSuggestedBtn.addEventListener('click', function() {
                try {
                    const suggestedConfig = JSON.parse(suggestedConfigJson);
                    const suggestedPlugins = suggestedConfig.settings.plugins;

                    allCheckboxes.forEach(checkbox => {
                        if (!checkbox.disabled) { // Respect disabled state
                            const pluginName = checkbox.dataset.pluginName;
                            // Check if plugin exists in suggested config and is enabled=true
                            checkbox.checked = suggestedPlugins[pluginName]?.enabled === true;
                            checkbox.dispatchEvent(new Event('change', { bubbles: true }));
                        }
                    });
                    console.log('تم تطبيق الإعدادات المقترحة.');
                } catch (e) {
                    console.error("خطأ في تحليل JSON المقترح:", e);
                    alert("حدث خطأ أثناء تطبيق الإعدادات المقترحة.");
                }
             });
           }

           const enableAllBtn = document.getElementById('enableAllBtn');
           if (enableAllBtn) { enableAllBtn.addEventListener('click', function() { document.querySelectorAll(allCheckboxesQuery).forEach(checkbox => { checkbox.checked = true; checkbox.dispatchEvent(new Event('change', { bubbles: true })); }); console.log('Enabled all non-required.'); }); }

           // زر "تعطيل الكل" - تم إصلاحه للتأكد من استهداف المحدد الصحيح
           const disableAllBtn = document.getElementById('disableAllBtn');
           if (disableAllBtn) {
             disableAllBtn.addEventListener('click', function() {
               console.log(`Attempting to disable plugins using selector: ${allCheckboxesQuery}`);
               const checkboxesToDisable = document.querySelectorAll(allCheckboxesQuery);
               console.log(`Found ${checkboxesToDisable.length} checkboxes to potentially disable.`);
               checkboxesToDisable.forEach(checkbox => {
                 checkbox.checked = false;
                 checkbox.dispatchEvent(new Event('change', { bubbles: true }));
               });
               console.log('Disabled all non-required.');
             });
           }
        }

        // --- إعداد أزرار التكوين ---
        function setupConfigButtons() { /* ... (config generation logic remains the same) ... */
            const allCheckboxesQuery = '.plugins-container .plugin input[type="checkbox"].plugin-checkbox'; const allSettingsInputsQuery = '.plugins-container .plugin-setting [data-plugin-name][data-setting-key]'; const generateButton = document.getElementById('generateConfigBtn'); const copyButton = document.getElementById('copyConfigBtn'); const downloadButton = document.getElementById('downloadConfigBtn'); const jsonOutputArea = document.getElementById('jsonOutput');
            function setActionButtonsState(enabled) { if (copyButton) { copyButton.classList.toggle('enabled', enabled); copyButton.disabled = !enabled; copyButton.style.cursor = enabled ? 'pointer' : 'not-allowed'; if (!enabled) { copyButton.classList.remove('copied'); copyButton.textContent = 'نسخ التكوين'; } } if (downloadButton) { downloadButton.classList.toggle('enabled', enabled); downloadButton.disabled = !enabled; downloadButton.style.cursor = enabled ? 'pointer' : 'not-allowed'; } } setActionButtonsState(false);
            const baseConfig = { settings: { autoUpdate: true, autoUpdateNotification: true, useQuickCss: true, themeLinks: [], enabledThemes: [], enableReactDevtools: false, frameless: false, transparent: false, winCtrlQ: false, disableMinSize: false, winNativeTitleBar: false, plugins: {} }, notifications: { timeout: 5000, position: "bottom-right", useNative: "not-focused", logLimit: 50 }, cloud: { authenticated: false, url: "https://api.vencord.dev/", settingsSync: false, settingsSyncVersion: Date.now() }, eagerPatches: false };
            pluginsData.forEach(plugin => { const settings = { enabled: requiredPlugins.includes(plugin.name) }; if (plugin.configurableSettings) { plugin.configurableSettings.forEach(s => { settings[s.key] = s.defaultValue; }); } baseConfig.settings.plugins[plugin.name] = settings; });
            baseConfig.settings.plugins["FakeNitro"] = { ...baseConfig.settings.plugins["FakeNitro"], enableEmojiBypass: true, enableStickerBypass: true, enableStreamQualityBypass: true, transformEmojis: true, transformStickers: true, transformCompoundSentence: false, emojiSize: 48, stickerSize: 160, useHyperLinks: true, hyperLinkText: "{{NAME}}", disableEmbedPermissionCheck: true }; baseConfig.settings.plugins["Experiments"] = { ...baseConfig.settings.plugins["Experiments"], toolbarDevMenu: false };
            if (generateButton && jsonOutputArea) { generateButton.addEventListener('click', function() { let config = JSON.parse(JSON.stringify(baseConfig)); document.querySelectorAll(allCheckboxesQuery).forEach(cb => { if (cb.dataset.pluginName && config.settings.plugins[cb.dataset.pluginName]) { config.settings.plugins[cb.dataset.pluginName].enabled = cb.checked; } }); document.querySelectorAll(allSettingsInputsQuery).forEach(input => { const pName = input.dataset.pluginName; const sKey = input.dataset.settingKey; if (config.settings.plugins[pName]?.enabled) { let val; if (input.type === 'checkbox') { val = input.checked; } else if (input.type === 'number') { val = parseFloat(input.value) || baseConfig.settings.plugins[pName][sKey]; if (input.min !== "" && val < parseFloat(input.min)) val = parseFloat(input.min); if (input.max !== "" && val > parseFloat(input.max)) val = parseFloat(input.max); } else { val = input.value; } if (config.settings.plugins[pName].hasOwnProperty(sKey)) { config.settings.plugins[pName][sKey] = val; } } }); jsonOutputArea.value = JSON.stringify(config, null, 4); setActionButtonsState(true); if (copyButton) { copyButton.classList.remove('copied'); copyButton.textContent = 'نسخ التكوين'; } }); }
            if (copyButton) { copyButton.addEventListener('click', function() { if (!copyButton.classList.contains('enabled') || !jsonOutputArea.value) return; navigator.clipboard.writeText(jsonOutputArea.value).then(() => { copyButton.textContent = 'تم النسخ!'; copyButton.classList.add('copied'); setTimeout(() => { if (copyButton.classList.contains('copied')) { copyButton.textContent = 'نسخ التكوين'; copyButton.classList.remove('copied'); } }, 2000); }).catch(err => { console.error('Failed to copy:', err); copyButton.textContent = 'فشل النسخ'; setTimeout(() => { if (copyButton.classList.contains('enabled')) { copyButton.textContent = 'نسخ التكوين'; } copyButton.classList.remove('copied'); }, 2000); }); }); }
            if (downloadButton) { downloadButton.addEventListener('click', function() { if (!downloadButton.classList.contains('enabled') || !jsonOutputArea.value) return; const blob = new Blob([jsonOutputArea.value], { type: 'application/json;charset=utf-8' }); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'vencord_config.json'; document.body.appendChild(a); a.click(); document.body.removeChild(a); URL.revokeObjectURL(url); }); }
        }

        // --- إعداد زر إعادة التشغيل ---
        function setupRestartButton() {
            const restartButton = document.getElementById('restartDiscordBtn');
            if (restartButton) {
                restartButton.addEventListener('click', function() {
                    // ملاحظة: إعادة التشغيل الفعلية غير ممكنة من هنا لأسباب أمنية.
                    // يمكنك محاولة استدعاء دالة مخصصة إذا كان هذا يعمل ضمن بيئة خاصة مثل Electron:
                    // if (window.electronAPI && window.electronAPI.restartApp) {
                    //    window.electronAPI.restartApp();
                    // } else {
                    //    alert("...");
                    // }
                    alert("للتطبيق الكامل لجميع الإعدادات (خاصة المتعلقة بالتحميل الأولي)، يرجى إعادة تشغيل تطبيق Discord يدويًا.");
                });
            }
        }

        // --- Execution Order ---
        createPlugins();
        setupSearch();
        setupSelectionButtons();
        setupConfigButtons();
        setupRestartButton(); // Call the new setup function
      });
    </script>
  </head>
  <body>
     <script> /* Theme script */ const theme = localStorage.theme?.toLowerCase(); const options = ["light", "dark"]; const osDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches; if (options.includes(theme)) { document.documentElement.className = theme; } else if (osDark) { document.documentElement.className = 'dark'; } else { document.documentElement.className = 'light'; } </script>
     <script> /* RTL script */ document.documentElement.setAttribute('dir', 'rtl'); document.documentElement.setAttribute('lang', 'ar'); </script>

    <nav>
      <div class="nav-content" style="flex-direction: row-reverse;">
        <div class="p-label-m" id="btns" style="margin-right: auto;">
          <ul id="right" style="float: left;">
            <li><a class="active" href="https://vencord.dev/download/" style="--accent:var(--accentPurple)">تنزيل</a></li>
          </ul>
        </div>
        <div id="logo" style="margin-left: auto;">
          <a href="index.html" id="title"><img alt="الصفحة الرئيسية لـ Vencord" src="assets/logo-nav-oneko-padding.png"/></a>
        </div>
      </div>
    </nav>

      <div class="container">
        <h1 class="p-page-title">الإضافات ومولد التكوين</h1>
        <p class="p-subtitle">تصفح قائمة الإضافات المصنفة، واختر ما يناسبك، ثم قم بإنشاء ملف التكوين الخاص بك لـ Vencord بسهولة. يمكنك تعديل بعض الإعدادات مباشرة من هنا.</p>

          <div class="search">
            <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg>
            <input placeholder="البحث عن إضافة..." type="search"/>
          </div>

          <div class="criteria">
            <label><input checked="" type="checkbox"/> إظهار الإضافات المخفية (غير مطبق حالياً)</label>
            <label><input checked="" type="checkbox"/> إظهار الإضافات المعطلة (غير مطبق حالياً)</label>
            <label><input checked="" type="checkbox"/> إظهار الإضافات المحددة للمنصة (غير مطبق حالياً)</label>
          </div>

          <div id="required-plugins-notice">
            <h4>الإضافات الإجبارية</h4>
            <p>الإضافات التالية ضرورية لتشغيل Vencord وسيتم تفعيلها دائمًا:</p>
            <div class="required-plugin">NoTrack - يمنع تتبع بيانات Discord وتحليلاتها.</div>
            <div class="required-plugin">Settings - يوفر واجهة إعدادات Vencord داخل Discord.</div>
            <div class="required-plugin">SupportHelper - يضيف معلومات مفيدة للمساعدة في استكشاف الأخطاء وإصلاحها.</div>
          </div>

          <div id="selection-buttons">
            <button id="selectAllBtn">تحديد الكل</button>
            <button id="selectSuggestedBtn">تحديد المقترحة</button>
            <button id="enableAllBtn">تفعيل الكل</button>
            <button id="disableAllBtn">تعطيل الكل</button>
          </div>

          <!-- Container for categorized plugins -->
          <div class="plugins-container">
              <!-- Category headers and grids will be generated here by JS -->
               <p>جاري تحميل الإضافات...</p> <!-- Placeholder -->
          </div>

          <div id="generation-section">
             <h2>إنشاء التكوين</h2>
            <div id="generation-controls">
              <button id="generateConfigBtn">إنشاء التكوين</button>
              <button id="copyConfigBtn">نسخ التكوين</button>
              <button id="downloadConfigBtn">تنزيل التكوين</button>
              <!-- زر إعادة التشغيل (تنبيه فقط) -->
              <button id="restartDiscordBtn">إعادة تشغيل Discord (تنبيه)</button>
            </div>
            <textarea id="jsonOutput" readonly placeholder="سيظهر هنا ملف التكوين JSON بعد النقر على زر 'إنشاء التكوين'..."></textarea>
          </div>
      </div>
      <footer>
        <p>تم تطويره بواسطة مساهمي Vencord | تم تعريبه بواسطة VenSHORT</p>
        <p>حقوق الطبع والنشر © 2024</p>
      </footer>
  </body>
</html>

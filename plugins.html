<!DOCTYPE html>
<html data-astro-cid-sckkx6r4="" lang="ar" dir="rtl">
  <!-- read if cute :3 -->
  <head>

    <title>الإضافات | VenSHORT</title>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <link href="assets/favicon.png" rel="icon"/>
    <link as="font" crossorigin="" href="fonts/Inter.var-subset.woff2" rel="preload" type="font/woff2"/>
    <meta content="تصفح قائمة إضافات Vencord المصنفة وقم بإنشاء ملف التكوين الخاص بك" name="description"/>
    <meta content="مساهمو Vencord" name="author"/>
    <meta content="#dd7878" name="theme-color"/>
    <meta content="website" name="og:type"/>
    <meta content="الإضافات المصنفة | مولد التكوين" name="og:title"/>
    <meta content="تصفح قائمة إضافات Vencord المصنفة وقم بإنشاء ملف التكوين الخاص بك" name="og:description"/>
    <meta content="plugins.html" name="og:url"/>
    <meta content="assets/favicon.png" name="og:image"/>
    <meta content="Vencord" name="og:site_name"/>
    <script type="application/ld+json"></script>

    <link href="sitemap-index.xml" rel="sitemap"/>
    <meta name="darkreader-lock"/>
    <link href="plugins.html" rel="canonical"/>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@400;700&display=swap');

      body {
        font-family: 'Noto Sans Arabic', sans-serif;
      }
      /*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */
      html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}
    </style>

    <link href="_astro/gdpr.61vMHWDU.css" rel="stylesheet"/>
    <style>
      /* CSS Variables (Copied from CODE.txt) */
      :root {
        --bg0: #1e1e2e;
        --bg1: #313244;
        --bg2: #45475a;
        --bg3: #585b70;
        --bg4: #6c7086;
        --fg0: #cdd6f4;
        --fg1: #bac2de;
        --grey0: #9399b2;
        --grey1: #7f849c;
        --grey2: #6c7086;
        --accentBlue: #89b4fa;
        --accentLavender: #b4befe;
        --accentSapphire: #74c7ec;
        --accentSky: #89dceb;
        --accentTeal: #94e2d5;
        --accentGreen: #a6e3a1;
        --accentYellow: #f9e2af;
        --accentPeach: #fab387;
        --accentMaroon: #eba0ac;
        --accentRed: #f38ba8;
        --accentMauve: #cba6f7;
        --accentPink: #f5c2e7;
        --accentFlamingo: #f2cdcd;
        --accentRosewater: #f5e0dc;
        --accentPurple: #b4befe; /* Main accent for buttons */
        --accentAqua: #94e2d5; /* Used for copy feedback */
        --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        --border-sm: 0.125rem;
        --border-md: 0.25rem;
        --border-lg: 0.5rem;
      }

      /* اجعل الجسم عموديًا ويأخذ كامل ارتفاع الشاشة */
      body {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        background-color: var(--bg0); /* Applied from CODE.txt */
        color: var(--fg0); /* Applied from CODE.txt */
      }

      /* المحتوى الرئيسي يتمدد ليملأ المساحة الفارغة */
      .container, astro-island {
        flex: 1;
        max-width: 1200px;
        margin: 0 auto;
        padding: 1em 2em; /* Matched padding */
      }

      /* تنسيق الفوتر */
      footer {
        margin-top: auto;
        padding: 1em;
        background-color: #2c3e50; /* Explicit color from CODE.txt */
        color: #ffffff; /* Explicit color from CODE.txt */
        text-align: center;
        font-family: 'Noto Sans Arabic', sans-serif;
      }
      footer p {
        margin: 5px 0; /* Matched margin */
      }

      /* --- General Text Styles --- */
      h1.p-page-title {
        color: var(--accentBlue); /* Applied from CODE.txt */
        font-size: 2.5em;
        margin-bottom: 0.2em;
      }
      p.p-subtitle {
        font-size: 1.1em;
        color: var(--fg1); /* Applied from CODE.txt */
        margin-bottom: 1.5em;
      }
      .category-description { /* Added style for category description in File 2 */
         font-size: 0.9em;
         color: var(--fg1); /* Applied from CODE.txt */
         margin-bottom: 1.5em;
         margin-top: -0.5em; /* Adjust spacing */
      }

      /* --- Category Header Styles --- */
      h2.category-header {
        font-size: 1.8em;
        margin-block: 2em 0.8em;
        color: var(--accentLavender); /* Applied from CODE.txt */
        border-bottom: 2px solid var(--accentLavender); /* Applied from CODE.txt */
        padding-bottom: 0.3em;
      }

      h3 { /* Plugin Title */
        margin: 0;
        word-wrap: break-word;
        line-height: 1.3;
        font-size: 1.1em; /* Matched size */
        color: var(--fg0); /* Applied from CODE.txt */
        font-weight: 700; /* Applied from CODE.txt */
      }

      .author {
        white-space: nowrap;
        font-size: 0.85em; /* Matched size */
        color: var(--grey1); /* Applied from CODE.txt (Overwrites original peach) */
      }

      .author:before {
        content: "بواسطة ";
        color: var(--grey1); /* Applied from CODE.txt */
      }

      .description {
        font-size: .9em;
        color: var(--fg1); /* Applied from CODE.txt */
        margin-bottom: 0.5em;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        line-clamp: 3;
        -webkit-box-orient: vertical;
        box-orient: vertical;
        line-height: 1.4;
      }

      /* --- Plugin Card Styles --- */
      .plugin {
        display: flex;
        align-items: flex-start;
        gap: 15px; /* Matched gap */
        padding: 1.5em; /* Matched padding */
        border-radius: var(--border-lg); /* Matched border radius */
        box-shadow: var(--shadow-md); /* Applied from CODE.txt */
        transition: box-shadow 0.3s ease, transform 0.2s ease; /* Applied from CODE.txt */
        background-color: var(--bg1); /* Applied from CODE.txt */
        cursor: pointer;
      }

      .plugin:hover {
        box-shadow: var(--shadow-lg); /* Applied from CODE.txt */
        transform: translateY(-2px); /* Applied from CODE.txt */
      }

      .plugin .plugin-content {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        gap: 0.3em;
      }

      .plugin input[type="checkbox"].plugin-checkbox {
        flex-shrink: 0;
        margin-top: 0.2em; /* Matched alignment */
        height: 1.3em; /* Matched size */
        width: 1.3em;
        cursor: pointer;
        accent-color: var(--accentPurple); /* Applied from CODE.txt */
      }

      /* Ensure direct clicks on content inside the link don't trigger nav */
      .plugin .plugin-link * {
        pointer-events: none; /* Applied from CODE.txt */
      }

      /* --- Plugin Settings UI --- */
      .plugin-settings {
        margin-top: 0.8em;
        padding-top: 0.8em;
        border-top: 1px solid var(--bg3); /* Applied from CODE.txt */
        display: flex;
        flex-direction: column;
        gap: 0.6em;
      }

      .plugin-setting {
        display: flex;
        align-items: center;
        gap: 0.8em;
      }

      .plugin-setting label {
        font-size: 0.85em;
        color: var(--fg1); /* Applied from CODE.txt */
        flex-basis: 120px; /* Matched width */
        flex-shrink: 0;
        text-align: right;
        margin-right: 5px;
      }

      .plugin-setting input[type="text"],
      .plugin-setting input[type="number"],
      .plugin-setting input[type="color"],
      .plugin-setting select {
        font-size: 0.85em;
        padding: 0.3em 0.5em;
        border-radius: var(--border-sm); /* Matched radius */
        border: 1px solid var(--bg3); /* Applied from CODE.txt */
        background-color: var(--bg0); /* Applied from CODE.txt */
        color: var(--fg0); /* Applied from CODE.txt */
        flex-grow: 1;
        max-width: 200px;
        box-sizing: border-box;
      }

      .plugin-setting input[type="checkbox"] { /* Settings checkbox */
        height: 1.1em;
        width: 1.1em;
        accent-color: var(--accentPurple); /* Applied from CODE.txt */
        cursor: pointer;
        order: -1; /* Keep order from File 2 */
        margin-right: -0.4em; /* Adjust spacing */
      }

      .plugin-setting input[type="color"] {
        padding: 0.1em;
        min-height: 25px;
      }

      /* Make settings inputs clickable inside the card */
      .plugin-setting input, .plugin-setting select {
        cursor: text; /* Or appropriate cursor */
        pointer-events: all !important; /* Applied from CODE.txt */
      }

      .plugin-setting label {
        pointer-events: all !important; /* Applied from CODE.txt */
        cursor: default;
      }

      /* --- Generation Section Styles --- */
      #generation-section {
        margin-top: 3em;
        padding: 2.5em;
        background-color: var(--bg2); /* Applied from CODE.txt */
        border-radius: var(--border-lg); /* Matched radius */
        display: flex;
        flex-direction: column;
        gap: 2em;
        border: 1px solid var(--bg3); /* Applied from CODE.txt */
      }

      #generation-section h2 {
        font-size: 1.8em;
        margin: 0 0 0.5em 0;
        padding: 0;
        border: none;
        color: var(--accentTeal); /* Applied from CODE.txt */
      }

      #generation-controls {
        display: flex;
        gap: 1.2em;
        flex-wrap: wrap;
        align-items: center;
      }

      #generateConfigBtn, #copyConfigBtn, #downloadConfigBtn, #selectAllBtn, #selectSuggestedBtn, #disableAllBtn, #restartDiscordBtn {
        padding: 0.9em 1.8em; /* Matched padding */
        color: white;
        border: none;
        border-radius: var(--border-md); /* Matched radius */
        cursor: pointer;
        font-size: 1em; /* Matched font size */
        transition: background-color 0.2s ease, opacity 0.2s ease, transform 0.1s ease; /* Matched transition */
        font-family: 'Noto Sans Arabic', sans-serif;
        opacity: 1;
        font-weight: 700; /* Matched font weight */
      }

      /* Applied button colors from CODE.txt */
      #generateConfigBtn, #disableAllBtn {
        background-color: var(--accentBlue);
      }
      #copyConfigBtn, #downloadConfigBtn, #selectAllBtn, #selectSuggestedBtn {
        background-color: var(--accentPurple);
      }
      #restartDiscordBtn {
        background-color: var(--accentRed);
        margin-right: auto; /* Keep positioning from File 2 */
      }

      /* Applied disabled/enabled states from CODE.txt */
      #copyConfigBtn, #downloadConfigBtn {
        opacity: 0.6;
        cursor: not-allowed;
      }
      #copyConfigBtn.enabled, #downloadConfigBtn.enabled {
        opacity: 1;
        cursor: pointer;
      }

      /* Button Hover & Active States (Applied from CODE.txt) */
      #generateConfigBtn:hover, #disableAllBtn:hover {
        background-color: hsl(from var(--accentBlue) h s calc(l - 8%));
      }
      #copyConfigBtn.enabled:hover, #downloadConfigBtn.enabled:hover, #selectAllBtn:hover, #selectSuggestedBtn:hover {
        background-color: hsl(from var(--accentPurple) h s calc(l - 8%));
      }
      #restartDiscordBtn:hover {
          background-color: hsl(from var(--accentRed) h s calc(l - 8%));
      }
       #generateConfigBtn:active, #disableAllBtn:active,
       #copyConfigBtn.enabled:active, #downloadConfigBtn.enabled:active, #selectAllBtn:active, #selectSuggestedBtn:active, #restartDiscordBtn:active {
           transform: scale(0.98);
       }

      /* Applied copied state from CODE.txt */
      #copyConfigBtn.copied {
        background-color: var(--accentAqua);
        color: var(--bg0);
      }
      #copyConfigBtn.copied:hover {
          background-color: hsl(from var(--accentAqua) h s calc(l - 8%));
      }

      #jsonOutput {
        width: 100%;
        min-height: 350px;
        background-color: var(--bg0); /* Applied from CODE.txt */
        color: var(--fg0); /* Applied from CODE.txt */
        border: 1px solid var(--bg3); /* Applied from CODE.txt */
        border-radius: var(--border-md); /* Matched radius */
        padding: 1.5em; /* Matched padding */
        font-family: monospace;
        white-space: pre;
        overflow: auto;
        box-sizing: border-box;
        resize: vertical;
        direction: ltr;
        text-align: left;
        font-size: 0.9em; /* Matched font size */
        line-height: 1.5;
      }

      /* --- Selection Button Styles --- */
      #selection-buttons {
        margin-bottom: 1.5em;
        margin-top: 1.5em;
        display: flex;
        gap: 1em;
        flex-wrap: wrap;
      }

      /* --- Required Plugins Notice (Applied styles from CODE.txt) --- */
      #required-plugins-notice {
        margin-top: 1.5em;
        padding: 1em 1.5em;
        background-color: rgba(from var(--accentYellow) r g b / 0.1);
        border: 1px solid rgba(from var(--accentYellow) r g b / 0.3);
        border-radius: var(--border-md);
        font-size: 0.9em;
        color: var(--accentYellow);
      }

      #required-plugins-notice h4 {
        margin-top: 0;
        margin-bottom: 0.5em;
        color: var(--accentYellow);
        font-size: 1.1em;
        font-weight: 700;
      }

      #required-plugins-notice p {
        margin-bottom: 1em;
        line-height: 1.5;
        color: var(--fg1);
      }

      .required-plugin {
        background-color: rgba(from var(--accentYellow) r g b / 0.05);
        border-radius: var(--border-sm);
        padding: 0.6em 1em;
        margin-bottom: 0.5em;
        color: var(--fg0);
      }

      .plugin.required-core-plugin {
        background-color: rgba(from var(--accentYellow) r g b / 0.05);
        border: 1px solid rgba(from var(--accentYellow) r g b / 0.2);
        cursor: not-allowed;
      }
      .plugin.required-core-plugin:hover { /* Prevent hover effect */
        box-shadow: var(--shadow-md);
        transform: none;
      }
      .plugin.required-core-plugin input[type="checkbox"] {
        opacity: 0.6;
        cursor: not-allowed;
      }

      /* --- Theme Selection Styles (Kept styles from File 2, as they use the new palette) --- */
      #theme-selection {
        margin-top: 1.5em;
        padding: 1em 1.5em;
        background-color: rgba(from var(--accentBlue) r g b / 0.1);
        border: 1px solid rgba(from var(--accentBlue) r g b / 0.3);
        border-radius: var(--border-md);
        font-size: 0.9em;
      }

      #theme-selection h4 {
        margin-top: 0;
        margin-bottom: 0.8em;
        color: var(--accentBlue);
        font-size: 1.1em;
        font-weight: 700;
      }

      .theme-option {
        display: flex;
        align-items: center;
        gap: 0.8em;
        margin-bottom: 0.8em;
        padding: 0.5em;
        border-radius: var(--border-sm);
        background-color: rgba(from var(--accentBlue) r g b / 0.05);
      }

      .theme-option input[type="checkbox"] {
        height: 1.2em;
        width: 1.2em;
        cursor: pointer;
        accent-color: var(--accentBlue);
      }

      .theme-option .theme-name {
        font-weight: 600;
        color: var(--fg0);
      }

      .theme-option .theme-author {
        /* Using accentPeach from the new palette, looks good here */
        color: var(--accentPeach);
        font-size: 0.9em;
        margin-right: 0.5em;
      }

      /* --- Plugin Grid and Categories --- */
      .plugins-container {
        /* Removed margin-top from File 2, let category spacing handle it */
      }

      .category-section {
        /* Keep structure from File 2 */
        margin-bottom: 3em;
      }

      .plugins-grid {
        display: grid;
        /* Kept original grid columns from File 2 */
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        grid-gap: 1.2em; /* Matched gap */
      }

      /* --- Search Styles (Applied styles from CODE.txt) --- */
       .search {
        position: relative;
        height: auto;
        margin-top: 1.5em; /* Matched spacing */
        margin-bottom: 1em;
      }
      .search svg {
        position: absolute;
        left: 1em; /* Matched position */
        top: 50%;
        transform: translateY(-50%);
        z-index: 2;
        color: var(--grey0); /* Applied color */
        height: 1.1em; /* Matched size */
        pointer-events: none;
      }
      .search input {
        position: relative; /* Changed from absolute */
        text-indent: 0;
        padding-left: 2.8em; /* Added padding for icon */
        background: var(--bg2); /* Applied background */
        color: var(--fg0); /* Applied color */
        border: 1px solid var(--bg3); /* Applied border */
        border-radius: var(--border-md); /* Matched radius */
        box-sizing: border-box;
        width: 100%;
        margin: 0;
        padding: 0.9em 1em 0.9em 2.8em; /* Matched padding */
        font-size: 1em; /* Matched font size */
      }
      .search input::placeholder {
        color: var(--grey1); /* Applied color */
      }
      .search input:focus {
          outline: none;
          border-color: var(--accentBlue); /* Applied focus style */
          box-shadow: 0 0 0 2px rgba(from var(--accentBlue) r g b / 0.3); /* Applied focus style */
      }

      /* --- Logo Styles --- */
      #logo img {
        width: 100px;
        height: auto;
        max-width: 100%;
      }

      /* --- Navigation Styles (Applied styles from CODE.txt) --- */
      nav {
        background-color: var(--bg1); /* Applied background */
        padding: 0.5em 1em;
        border-bottom: 1px solid var(--bg3); /* Applied border */
      }

      .nav-content {
        display: flex;
        align-items: center;
        max-width: 1200px;
        margin: 0 auto;
        /* Keep flex-direction: row-reverse from File 2 if needed */
      }

      #btns ul {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
      }

      #btns li {
        margin-left: 1em; /* Keep spacing from File 2 */
      }

      #btns a {
        text-decoration: none;
        color: var(--accentPurple); /* Applied color */
        font-weight: 700; /* Matched font weight */
        padding: 0.5em 1em;
        border-radius: var(--border-md); /* Matched radius */
        transition: background-color 0.2s ease; /* Matched transition */
      }

      #btns a:hover {
        background-color: rgba(from var(--accentPurple) r g b / 0.1); /* Applied hover */
      }

      /* Removed .active style from File 2 to match File 1's simpler nav styling */
      /*
      #btns a.active {
        background-color: var(--accentPurple);
        color: white;
      }
      */

      /* Ellipsis Overflow (Applied from CODE.txt) */
      .ellipsis-overflow {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }


    </style>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // تعريف الإضافات الإجبارية
        const requiredPlugins = ["NoTrack", "Settings", "SupportHelper"];

        // --- تعريف فئات الإضافات ---
        const categories = {
          "api": {
            name: "واجهات برمجة التطبيقات",
            description: "إضافات تقدم واجهات برمجية للإضافات الأخرى"
          },
          "core": {
            name: "الإضافات الأساسية",
            description: "إضافات أساسية لتشغيل Vencord"
          },
          "appearance": {
            name: "المظهر",
            description: "إضافات تغير مظهر Discord"
          },
          "utility": {
            name: "الأدوات المساعدة",
            description: "إضافات تضيف وظائف مفيدة"
          },
          "fun": {
            name: "المرح",
            description: "إضافات للترفيه والمتعة"
          },
          "privacy": {
            name: "الخصوصية",
            description: "إضافات لتعزيز الخصوصية"
          },
          "misc": {
            name: "متنوعة",
            description: "إضافات متنوعة لا تندرج تحت الفئات الأخرى"
          }
        };

        // --- بيانات الإضافات مع الفئات (From CODE2.txt) ---
        const pluginsData = [
            // API Plugins
          {
            name: "ChatInputButtonAPI",

            description: "واجهة برمجة تطبيقات زر إدخال الدردشة",
            author: "Vendicated",
            category: "api"
          },
          {
            name: "CommandsAPI",
            description: "واجهة برمجة تطبيقات الأوامر",
            author: "Vendicated",
            category: "api"
          },
          {
            name: "MemberListDecoratorsAPI",
            description: "واجهة برمجة تطبيقات مزخرفات قائمة الأعضاء",
            author: "Vendicated",
            category: "api"
          },
          {
            name: "MessageAccessoriesAPI",
            description: "واجهة برمجة تطبيقات ملحقات الرسائل",
            author: "Vendicated",
            category: "api"
          },
          {
            name: "MessageDecorationsAPI",
            description: "واجهة برمجة تطبيقات زخارف الرسائل",
            author: "Vendicated",
            category: "api"
          },
          {
            name: "MessageEventsAPI",
            description: "واجهة برمجة تطبيقات أحداث الرسائل",
            author: "Vendicated",
            category: "api"
          },
          {
            name: "MessagePopoverAPI",
            description: "واجهة برمجة تطبيقات منبثقة الرسائل",
            author: "Vendicated",
            category: "api"
          },
          {
            name: "MessageUpdaterAPI",
            description: "واجهة برمجة تطبيقات محدث الرسائل",
            author: "Vendicated",
            category: "api"
          },
          {
            name: "ServerListAPI",
            description: "واجهة برمجة تطبيقات قائمة الخوادم",
            author: "Vendicated",
            category: "api"
          },
          {
            name: "UserSettingsAPI",
            description: "واجهة برمجة تطبيقات إعدادات المستخدم",
            author: "Vendicated",
            category: "api"
          },
          {
            name: "DynamicImageModalAPI",
            description: "واجهة برمجة تطبيقات نافذة الصور الديناميكية",
            author: "Vendicated",
            category: "api"
          },
          {
            name: "BadgeAPI",
            description: "واجهة برمجة تطبيقات الشارات",
            author: "Vendicated",
            category: "api"
          },

          // Core Plugins
          {
            name: "CrashHandler",
            description: "معالج الأعطال",
            author: "Vendicated",
            category: "core"
          },
          {
            name: "Settings",
            description: "إعدادات Vencord",
            author: "Vendicated",
            category: "core",
            settings: [
              {
                type: "select",
                name: "settingsLocation",
                label: "موقع الإعدادات:", // Added colon for consistency
                options: [
                  { value: "aboveNitro", label: "فوق Nitro" },
                  { value: "belowNitro", label: "تحت Nitro" },
                  { value: "aboveActivity", label: "فوق النشاط" }
                ],
                defaultValue: "aboveNitro"
              }
            ]
          },
          {
            name: "SupportHelper",
            description: "مساعدة في حل المشكلات وتقديم الدعم",
            author: "Vendicated",
            category: "core"
          },
          {
            name: "NoTrack",
            description: "منع تتبع البيانات",
            author: "Vendicated",
            category: "privacy",
            settings: [
              {
                type: "checkbox",
                name: "disableAnalytics",
                label: "تعطيل التحليلات:", // Added colon
                defaultValue: true
              }
            ]
          },

          // Appearance Plugins
          {
            name: "ClientTheme",
            description: "تغيير لون خلفية العميل",
            author: "Vendicated",
            category: "appearance",
            settings: [
              {
                type: "color",
                name: "color",
                label: "اللون:", // Added colon
                defaultValue: "313338" // No # prefix needed here for logic
              }
            ]
          },
          {
            name: "BetterFolders",
            description: "عرض مجلدات الخادم على الشريط الجانبي المخصص وإضافة تحسينات متعلقة بالمجلدات",
            author: "Juby210, AutumnVN, Nuckyz",
            category: "appearance",
            settings: [
              {
                type: "checkbox",
                name: "sidebarFolders",
                label: "مجلدات الشريط الجانبي:", // Added colon
                defaultValue: true
              },
              {
                type: "checkbox",
                name: "closeAllFolders",
                label: "إغلاق جميع المجلدات:", // Added colon
                defaultValue: true
              },
              {
                type: "checkbox",
                name: "closeAllHomeButton",
                label: "زر إغلاق الكل في الصفحة الرئيسية:", // Added colon
                defaultValue: true
              }
            ]
          },
          {
            name: "BetterRoleDot",
            description: "نسخ لون الدور عند النقر على نقطة الدور (إعداد إمكانية الوصول). يسمح أيضًا باستخدام نقطة الدور والأسماء الملونة في وقت واحد",
            author: "Vee, AutumnVN",
            category: "appearance",
            settings: [
              {
                type: "checkbox",
                name: "bothStyles",
                label: "كلا النمطين:", // Added colon
                defaultValue: true
              }
            ]
          },
          {
            name: "AlwaysAnimate",
            description: "تحريك أي شيء يمكن تحريكه",
            author: "Fiery",
            category: "appearance"
          },
          {
            name: "AlwaysExpandRoles",
            description: "توسيع قائمة الأدوار دائمًا في نوافذ الملفات الشخصية",
            author: "Chloe",
            category: "appearance"
          },
          {
            name: "BetterGifAltText",
            description: "تغيير نص GIF البديل من مجرد 'GIF' ليحتوي على علامات gif / اسم الملف",
            author: "Vee",
            category: "appearance"
          },
          {
            name: "BetterGifPicker",
            description: "جعل منتقي GIF يفتح فئة المفضلة افتراضيًا",
            author: "Samwich",
            category: "appearance"
          },
          {
            name: "BetterNotesBox",
            description: "إخفاء الملاحظات أو تعطيل التدقيق الإملائي (قم بالتكوين في الإعدادات!!)",
            author: "Vee",
            category: "appearance"
          },
          {
            name: "BetterRoleContext",
            description: "إضافة خيارات لنسخ لون الدور / تحرير الدور / عرض أيقونة الدور عند النقر بزر الماوس الأيمن على الأدوار في ملف المستخدم الشخصي",
            author: "Vee, goodbee",
            category: "utility"
          },
          {
            name: "BetterSettings",
            description: "تحسين تجربة فتح قائمة الإعدادات",
            author: "Kyuuhachi",
            category: "appearance"
          },
          {
            name: "BetterUploadButton",
            description: "التحميل بنقرة واحدة، وفتح القائمة بالنقر بزر الماوس الأيمن",
            author: "fawn, Vee",
            category: "utility"
          },
          {
            name: "BiggerStreamPreview",
            description: "تتيح لك هذه الإضافة تكبير معاينات البث",
            author: "phil",
            category: "appearance"
          },
          {
            name: "BlurNSFW",
            description: "تمويه المرفقات في قنوات NSFW حتى تمرير المؤشر فوقها",
            author: "Vee",
            category: "appearance"
          },
          {
            name: "ColorSighted",
            description: "إضافة مؤشرات لونية للأزرار في مربعات الحوار",
            author: "Vendicated",
            category: "appearance"
          },
          {
            name: "Decor",
            description: "تخصيص مظهر Discord",
            author: "Vendicated",
            category: "appearance"
          },
          {
            name: "FakeProfileThemes",
            description: "إضافة سمات ملف شخصي مخصصة",
            author: "Vendicated",
            category: "appearance"
          },
          {
            name: "FavoriteEmojiFirst",
            description: "عرض الرموز التعبيرية المفضلة أولاً",
            author: "Vendicated",
            category: "appearance"
          },
          {
            name: "FixImagesQuality",
            description: "تحسين جودة الصور",
            author: "Vendicated",
            category: "appearance"
          },
          {
            name: "NoMosaic",
            description: "إزالة تأثير الفسيفساء من الصور",
            author: "Vendicated",
            category: "appearance",
            settings: [
              {
                type: "checkbox",
                name: "noMosaicAttachments",
                label: "إزالة الفسيفساء من المرفقات:", // Added colon
                defaultValue: true
              },
              {
                type: "checkbox",
                name: "noMosaicEmbeds",
                label: "إزالة الفسيفساء من المضمنات:", // Added colon
                defaultValue: true
              }
            ]
          },
          {
            name: "NoTypingAnimation",
            description: "إزالة رسوم متحركة للكتابة",
            author: "Vendicated",
            category: "appearance"
          },

          // Utility Plugins
          {
            name: "AccountPanelServerProfile",
            description: "انقر بزر الماوس الأيمن على لوحة حسابك في الأسفل الأيسر لعرض ملفك الشخصي في الخادم الحالي",
            author: "Nuckyz, Relitrix",
            category: "utility"
          },
          {
            name: "AlwaysTrust",
            description: "إزالة نافذة المجال غير الموثوق به والملف المشبوه المزعجة",
            author: "zt, trey",
            category: "utility"
          },
          {
            name: "AnonymiseFileNames",
            description: "إخفاء أسماء الملفات المرفوعة",
            author: "fawn",
            category: "privacy"
          },
          {
            name: "AppleMusicRichPresence",
            description: "حالة ديسكورد الغنية لـ Apple Music!",
            author: "RyanCaoDev",
            category: "utility"
          },
          {
            name: "BANger",
            description: "استبدال صورة GIF في مربع حوار الحظر بصورة مخصصة.",
            author: "Xinto, Glitchy",
            category: "fun"
          },
          {
            name: "BetterSessions",
            description: "تحسين قائمة الجلسات (الأجهزة). يتيح لك عرض الطوابع الزمنية الدقيقة، وإعطاء كل جلسة اسمًا مخصصًا، وتلقي إشعارات حول الجلسات الجديدة.",
            author: "amia",
            category: "utility"
          },
          {
            name: "CallTimer",
            description: "إظهار مدة المكالمة الحالية",
            author: "Vendicated, Fiery",
            category: "utility",
            settings: [
              {
                type: "select",
                name: "format",
                label: "تنسيق الوقت:", // Added colon
                options: [
                  { value: "stopwatch", label: "ساعة إيقاف" },
                  { value: "timestamp", label: "طابع زمني" }
                ],
                defaultValue: "stopwatch"
              }
            ]
          },
          {
            name: "ClearURLs",
            description: "إزالة معلمات التتبع من عناوين URL",
            author: "Vendicated",
            category: "privacy"
          },
          {
            name: "ConsoleJanitor",
            description: "إزالة رسائل وحدة التحكم غير المرغوب فيها",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "ConsoleShortcuts",
            description: "إضافة اختصارات مفيدة إلى وحدة التحكم",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "CopyEmojiMarkdown",
            description: "نسخ الرموز التعبيرية بتنسيق Markdown",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "CopyFileContents",
            description: "نسخ محتويات الملفات المرفقة",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "CopyUserURLs",
            description: "نسخ عناوين URL للمستخدمين",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "CtrlEnterSend",
            description: "استخدام Ctrl+Enter لإرسال الرسائل",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "CustomIdle",
            description: "تخصيص حالة الخمول",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "CustomRPC",
            description: "إضافة حالة نشاط مخصصة",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "Dearrow",
            description: "إزالة الصور المصغرة المضللة من YouTube",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "DevCompanion",
            description: "أدوات مساعدة للمطورين",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "DisableCallIdle",
            description: "تعطيل الخمول أثناء المكالمات",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "DontRoundMyTimestamps",
            description: "عرض الطوابع الزمنية الدقيقة",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "EmoteCloner",
            description: "استنساخ الرموز التعبيرية بين الخوادم",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "Experiments",
            description: "الوصول إلى ميزات تجريبية",
            author: "Vendicated",
            category: "utility",
            settings: [
              {
                type: "checkbox",
                name: "toolbarDevMenu",
                label: "قائمة المطورين في شريط الأدوات:", // Added colon
                defaultValue: false
              }
            ]
          },
          {
            name: "F8Break",
            description: "إيقاف التنفيذ عند الضغط على F8",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "FakeNitro",
            description: "استخدام ميزات Nitro بدون اشتراك",
            author: "Vendicated",
            category: "utility",
            settings: [
              {
                type: "checkbox",
                name: "enableEmojiBypass",
                label: "تمكين تجاوز الرموز التعبيرية:", // Added colon
                defaultValue: true
              },
              {
                type: "checkbox",
                name: "enableStickerBypass",
                label: "تمكين تجاوز الملصقات:", // Added colon
                defaultValue: true
              },
              {
                type: "checkbox",
                name: "enableStreamQualityBypass",
                label: "تمكين تجاوز جودة البث:", // Added colon
                defaultValue: true
              },
              {
                type: "checkbox",
                name: "transformEmojis",
                label: "تحويل الرموز التعبيرية:", // Added colon
                defaultValue: true
              },
              {
                type: "checkbox",
                name: "transformStickers",
                label: "تحويل الملصقات:", // Added colon
                defaultValue: true
              },
              {
                type: "checkbox",
                name: "transformCompoundSentence",
                label: "تحويل الجمل المركبة:", // Added colon
                defaultValue: false
              },
              {
                type: "number",
                name: "emojiSize",
                label: "حجم الرموز التعبيرية:", // Added colon
                defaultValue: 48
              },
              {
                type: "number",
                name: "stickerSize",
                label: "حجم الملصقات:", // Added colon
                defaultValue: 160
              },
              {
                type: "checkbox",
                name: "useHyperLinks",
                label: "استخدام الروابط التشعبية:", // Added colon
                defaultValue: true
              },
              {
                type: "text",
                name: "hyperLinkText",
                label: "نص الرابط التشعبي:", // Added colon
                defaultValue: "{{NAME}}"
              },
              {
                type: "checkbox",
                name: "disableEmbedPermissionCheck",
                label: "تعطيل فحص إذن التضمين:", // Added colon
                defaultValue: true
              }
            ]
          },
          {
            name: "FavoriteGifSearch",
            description: "حفظ عمليات بحث GIF المفضلة",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "FriendsSince",
            description: "عرض تاريخ بداية الصداقة",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "GameActivityToggle",
            description: "تبديل نشاط الألعاب",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "MessageLinkEmbeds",
            description: "تضمين روابط الرسائل",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "NewGuildSettings",
            description: "إعدادات جديدة للخوادم",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "NoUnblockToJump",
            description: "القفز بدون إلغاء الحظر",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "OpenInApp",
            description: "فتح الروابط في التطبيقات",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "PinDMs",
            description: "تثبيت الرسائل المباشرة",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "PreviewMessage",
            description: "معاينة الرسائل",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "ReadAllNotificationsButton",
            description: "زر قراءة جميع الإشعارات",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "RelationshipNotifier",
            description: "إشعارات العلاقات",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "ReverseImageSearch",
            description: "البحث العكسي عن الصور",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "SendTimestamps",
            description: "إرسال الطوابع الزمنية",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "ServerInfo",
            description: "معلومات الخادم",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "ShowConnections",
            description: "عرض الاتصالات",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "Translate",
            description: "ترجمة الرسائل",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "UserVoiceShow",
            description: "عرض صوت المستخدم",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "ValidReply",
            description: "رد صالح",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "ValidUser",
            description: "مستخدم صالح",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "ViewIcons",
            description: "عرض الأيقونات",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "VoiceDownload",
            description: "تنزيل الصوت",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "VoiceMessages",
            description: "رسائل صوتية",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "VolumeBooster",
            description: "تعزيز الصوت",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "YoutubeAdblock",
            description: "منع إعلانات YouTube",
            author: "Vendicated",
            category: "utility"
          },
          {
            name: "YoutubeAdblock.desktop",
            description: "منع إعلانات YouTube (نسخة سطح المكتب)",
            author: "Vendicated",
            category: "utility"
          }
        ];


        // --- إنشاء حاويات الفئات ---
        function createCategoryContainers() {
          const pluginsContainer = document.querySelector('.plugins-container');
          if (!pluginsContainer) {
            console.error("لم يتم العثور على حاوية الإضافات.");
            return;
          }

          // مسح المحتوى الحالي
          pluginsContainer.innerHTML = '';

          // إنشاء قسم لكل فئة
          Object.keys(categories).forEach(categoryKey => {
            const category = categories[categoryKey];

            const categorySection = document.createElement('div');
            categorySection.className = 'category-section';
            categorySection.dataset.category = categoryKey;

            const categoryHeader = document.createElement('h2');
            categoryHeader.className = 'category-header';
            categoryHeader.textContent = category.name;

            const categoryDescription = document.createElement('p');
            categoryDescription.className = 'category-description'; // Use the styled class
            categoryDescription.textContent = category.description;

            const pluginsGrid = document.createElement('div');
            pluginsGrid.className = 'plugins-grid';
            pluginsGrid.dataset.category = categoryKey;

            categorySection.appendChild(categoryHeader);
            categorySection.appendChild(categoryDescription); // Add description
            categorySection.appendChild(pluginsGrid);

            pluginsContainer.appendChild(categorySection);
          });
        }

        // --- إنشاء عناصر الإضافات ---
        function createPlugins() {
          // إنشاء حاويات الفئات أولاً
          createCategoryContainers();

          // تصنيف الإضافات حسب الفئة
          pluginsData.forEach(plugin => {
            const categoryKey = plugin.category || 'misc';
            const pluginGrid = document.querySelector(`.plugins-grid[data-category="${categoryKey}"]`);

            if (!pluginGrid) {
              console.warn(`لم يتم العثور على شبكة الإضافات للفئة: ${categoryKey}. وضع في الفئة المتنوعة.`);
              // Fallback to misc if category grid isn't found (shouldn't happen with createCategoryContainers)
              pluginGrid = document.querySelector(`.plugins-grid[data-category="misc"]`);
              if (!pluginGrid) return; // Should definitely exist now
            }

            const pluginDiv = document.createElement('div');
            pluginDiv.className = 'plugin';

            // إضافة فئة للإضافات الإجبارية وتطبيق النمط المطلوب
            if (requiredPlugins.includes(plugin.name)) {
              pluginDiv.classList.add('required-core-plugin');
            }

            // إنشاء مربع الاختيار
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.dataset.pluginName = plugin.name;
            checkbox.className = 'plugin-checkbox';
            checkbox.setAttribute('aria-label', `تفعيل/تعطيل ${plugin.name}`);

            // تعيين حالة مربع الاختيار للإضافات الإجبارية وتعطيله
            if (requiredPlugins.includes(plugin.name)) {
              checkbox.checked = true;
              checkbox.disabled = true;
            }

            // إنشاء محتوى الإضافة
            const pluginContent = document.createElement('div');
            pluginContent.className = 'plugin-content';

            // Use div instead of anchor for title container
            const pluginLinkContainer = document.createElement('div');
            pluginLinkContainer.className = 'plugin-link'; // Still useful for structure if needed later

            // إنشاء عنوان الإضافة
            const pluginTitle = document.createElement('h3');
            pluginTitle.textContent = plugin.name;
            pluginTitle.className = 'ellipsis-overflow'; // Apply ellipsis

            // إنشاء اسم المؤلف
            const authorSpan = document.createElement('span');
            authorSpan.className = 'author ellipsis-overflow'; // Apply ellipsis
            authorSpan.textContent = plugin.author || 'غير معروف'; // Add fallback

            // إنشاء وصف الإضافة
            const descriptionP = document.createElement('p');
            descriptionP.className = 'description'; // Use styled class
            descriptionP.textContent = plugin.description || 'لا يوجد وصف.'; // Add fallback

            // تجميع العناصر
            pluginLinkContainer.appendChild(pluginTitle); // Title inside the div
            pluginContent.appendChild(pluginLinkContainer);
            pluginContent.appendChild(authorSpan);
            pluginContent.appendChild(descriptionP);

            // إضافة إعدادات الإضافة إذا كانت موجودة
            if (plugin.settings && plugin.settings.length > 0) {
              const settingsDiv = document.createElement('div');
              settingsDiv.className = 'plugin-settings';

              plugin.settings.forEach(setting => {
                const settingWrapper = document.createElement('div'); // Use wrapper div like in CODE.txt
                settingWrapper.className = 'plugin-setting';

                const label = document.createElement('label');
                label.textContent = setting.label; // Assumes label includes colon if needed
                const inputId = `${plugin.name}-${setting.name}-${Math.random().toString(36).substring(7)}`; // Unique ID
                label.htmlFor = inputId;

                let inputElement;

                switch (setting.type) {
                  case 'checkbox':
                    inputElement = document.createElement('input');
                    inputElement.type = 'checkbox';
                    inputElement.checked = setting.defaultValue;
                    inputElement.id = inputId;
                    // Apply CODE.txt structure: checkbox before label
                    settingWrapper.appendChild(inputElement);
                    settingWrapper.appendChild(label);
                    break;

                  case 'number':
                    inputElement = document.createElement('input');
                    inputElement.type = 'number';
                    inputElement.value = setting.defaultValue;
                    if (setting.min !== undefined) inputElement.min = setting.min;
                    if (setting.max !== undefined) inputElement.max = setting.max;
                    if (setting.step !== undefined) inputElement.step = setting.step;
                    inputElement.id = inputId;
                    settingWrapper.appendChild(label); // Label first
                    settingWrapper.appendChild(inputElement);
                    break;

                  case 'color':
                    inputElement = document.createElement('input');
                    inputElement.type = 'color';
                    // Value should have # for color input type
                    inputElement.value = setting.defaultValue.startsWith('#') ? setting.defaultValue : `#${setting.defaultValue}`;
                    inputElement.id = inputId;
                    settingWrapper.appendChild(label); // Label first
                    settingWrapper.appendChild(inputElement);
                    break;

                  case 'select':
                    inputElement = document.createElement('select');
                    inputElement.id = inputId;
                    (setting.options || []).forEach(opt => {
                      const option = document.createElement('option');
                      option.value = opt.value; // Use value/label from File 2 structure
                      option.textContent = opt.label;
                      if (opt.value === setting.defaultValue) option.selected = true;
                      inputElement.appendChild(option);
                    });
                    settingWrapper.appendChild(label); // Label first
                    settingWrapper.appendChild(inputElement);
                    break;

                  default: // Treat as text
                    inputElement = document.createElement('input');
                    inputElement.type = 'text';
                    inputElement.value = setting.defaultValue || '';
                    inputElement.id = inputId;
                    settingWrapper.appendChild(label); // Label first
                    settingWrapper.appendChild(inputElement);
                    break;

                }

                if (inputElement) {
                  inputElement.dataset.pluginName = plugin.name;
                  inputElement.dataset.settingName = setting.name; // Use 'settingName' consistent with File 2 JS
                  inputElement.dataset.settingKey = setting.name; // Add settingKey for potential compatibility if logic expects it
                  inputElement.className = 'plugin-setting-input'; // Keep class from File 2 JS if needed
                  // Add event listeners to stop propagation (like CODE.txt)
                  inputElement.addEventListener('click', (e) => e.stopPropagation());
                  inputElement.addEventListener('change', (e) => e.stopPropagation());
                }
                 // Allow label clicks for checkboxes (like CODE.txt)
                 if (setting.type === 'boolean' || setting.type === 'checkbox') {
                    label.addEventListener('click', (e) => e.stopPropagation());
                 }

                settingsDiv.appendChild(settingWrapper);
              });

              pluginContent.appendChild(settingsDiv);
            }

            pluginDiv.appendChild(checkbox);
            pluginDiv.appendChild(pluginContent);

             // Add click listener to the whole card (except settings/checkbox) like CODE.txt
             if (!requiredPlugins.includes(plugin.name)) {
                pluginDiv.addEventListener('click', function(event) {
                    // Do nothing if the click is on a setting input/label or the main checkbox itself
                    if (event.target.closest('.plugin-setting') || event.target === checkbox) {
                        return;
                    }
                    // Toggle the main checkbox
                    if (checkbox && !checkbox.disabled) {
                        checkbox.checked = !checkbox.checked;
                        // Dispatch change event so config generation picks it up
                        checkbox.dispatchEvent(new Event('change', { bubbles: true }));
                    }
                });
            }


            pluginGrid.appendChild(pluginDiv);
          });

           // Remove loading message if it exists
           const loadingMsg = document.querySelector('.plugins-container > p');
           if (loadingMsg && loadingMsg.textContent.includes('جاري تحميل')) {
                loadingMsg.parentNode.removeChild(loadingMsg);
            }
        }


        // --- تنفيذ البحث (Using CODE.txt logic for category hiding) ---
        function setupSearch() {
          const searchInput = document.querySelector('.search input');
          if (searchInput) {
            searchInput.addEventListener('input', function() {
              const searchTerm = this.value.toLowerCase().trim();
              const plugins = document.querySelectorAll('.plugins-container .plugin'); // Target plugins within container
              const categories = document.querySelectorAll('.category-section'); // Target category sections
              let visiblePluginCount = 0;

              plugins.forEach(plugin => {
                const pluginName = plugin.querySelector('h3')?.textContent.toLowerCase() || '';
                const pluginDescription = plugin.querySelector('.description')?.textContent.toLowerCase() || '';
                const pluginAuthor = plugin.querySelector('.author')?.textContent.toLowerCase() || '';

                const matches = searchTerm === '' ||
                               pluginName.includes(searchTerm) ||
                               pluginDescription.includes(searchTerm) ||
                               pluginAuthor.includes(searchTerm);

                plugin.style.display = matches ? 'flex' : 'none'; // Use flex display like CODE.txt
                 if(matches) visiblePluginCount++;
              });

              // Show/hide category headers and descriptions based on visible plugins
              categories.forEach(categorySection => {
                const grid = categorySection.querySelector('.plugins-grid');
                if (grid) {
                   const visiblePluginsInCategory = Array.from(grid.children).some(p => p.style.display !== 'none');
                   categorySection.style.display = visiblePluginsInCategory ? 'block' : 'none';
                } else {
                    categorySection.style.display = 'none'; // Hide if no grid (shouldn't happen)
                }
              });

               // Add 'no results' message handling like CODE.txt
                let noResultsMsg = document.getElementById('no-results-message');
                const container = document.querySelector('.plugins-container');
                if (visiblePluginCount === 0 && searchTerm !== '') {
                    if (!noResultsMsg && container) {
                        noResultsMsg = document.createElement('p');
                        noResultsMsg.id = 'no-results-message';
                        noResultsMsg.textContent = 'لم يتم العثور على إضافات مطابقة.';
                        noResultsMsg.style.textAlign = 'center';
                        noResultsMsg.style.marginTop = '2em';
                        container.appendChild(noResultsMsg);
                    } else if (noResultsMsg) {
                        noResultsMsg.style.display = 'block';
                    }
                } else if (noResultsMsg) {
                    noResultsMsg.style.display = 'none';
                }

            });
          }
        }


        // --- إعداد أزرار التحديد (Using CODE.txt logic) ---
        function setupSelectionButtons() {
          const allCheckboxesQuery = '.plugins-container .plugin:not(.required-core-plugin) input[type="checkbox"].plugin-checkbox';
          const allCheckboxes = document.querySelectorAll('.plugins-container .plugin input[type="checkbox"].plugin-checkbox'); // Select all for suggested logic

          const selectAllBtn = document.getElementById('selectAllBtn');
          if (selectAllBtn) {
            selectAllBtn.addEventListener('click', function() {
              document.querySelectorAll(allCheckboxesQuery).forEach(checkbox => {
                 if (!checkbox.disabled) { // Ensure not disabled
                    checkbox.checked = true;
                    checkbox.dispatchEvent(new Event('change', { bubbles: true }));
                 }
              });
              console.log('Selected all non-required.');
            });
          }

          // زر تحديد المقترحة (Use the same logic as File 2's list)
          const selectSuggestedBtn = document.getElementById('selectSuggestedBtn');
          if (selectSuggestedBtn) {
            selectSuggestedBtn.addEventListener('click', function() {
              const suggestedPluginNames = [ // List from File 2's JS
                "ChatInputButtonAPI", "CommandsAPI", "MemberListDecoratorsAPI", "MessageAccessoriesAPI",
                "MessageDecorationsAPI", "MessageEventsAPI", "MessagePopoverAPI", "MessageUpdaterAPI",
                "ServerListAPI", "UserSettingsAPI", "DynamicImageModalAPI", "BadgeAPI", "CrashHandler",
                "Settings", "SupportHelper", "NoTrack", "CallTimer", "ClearURLs", "ClientTheme",
                "EmoteCloner", "Experiments", "FixImagesQuality", "FriendsSince", "GameActivityToggle",
                "MessageLinkEmbeds", "NewGuildSettings", "NoTypingAnimation", "NoUnblockToJump",
                "OpenInApp", "PinDMs", "PreviewMessage", "ReadAllNotificationsButton",
                "RelationshipNotifier", "ReverseImageSearch", "SendTimestamps", "ServerInfo",
                "ShowConnections", "Translate", "UserVoiceShow", "ValidReply", "ValidUser",
                "ViewIcons", "VoiceDownload", "VoiceMessages", "VolumeBooster",
                "YoutubeAdblock.desktop", "YoutubeAdblock"
              ];

              allCheckboxes.forEach(checkbox => {
                const pluginName = checkbox.dataset.pluginName;
                if (!checkbox.disabled) { // Only change non-required
                  checkbox.checked = suggestedPluginNames.includes(pluginName);
                  checkbox.dispatchEvent(new Event('change', { bubbles: true }));
                } else {
                    // Ensure required plugins *remain* checked visually even if they aren't in the suggested list
                    checkbox.checked = true;
                }
              });
              // Reset settings to default when selecting suggested (optional, but might be desired)
              document.querySelectorAll('.plugin-setting-input').forEach(input => {
                 const pluginName = input.dataset.pluginName;
                 const settingName = input.dataset.settingName;
                 const pluginData = pluginsData.find(p => p.name === pluginName);
                 const settingData = pluginData?.settings?.find(s => s.name === settingName);
                 if (settingData) {
                    if (input.type === 'checkbox') input.checked = settingData.defaultValue;
                    else if (input.type === 'color') input.value = settingData.defaultValue.startsWith('#') ? settingData.defaultValue : `#${settingData.defaultValue}`;
                    else input.value = settingData.defaultValue;
                    input.dispatchEvent(new Event('change', { bubbles: true }));
                 }
              });
              console.log('Selected suggested plugins.');
            });
          }

          // زر تعطيل الكل
          const disableAllBtn = document.getElementById('disableAllBtn');
          if (disableAllBtn) {
            disableAllBtn.addEventListener('click', function() {
              document.querySelectorAll(allCheckboxesQuery).forEach(checkbox => {
                 if (!checkbox.disabled) { // Ensure not disabled
                    checkbox.checked = false;
                    checkbox.dispatchEvent(new Event('change', { bubbles: true }));
                 }
              });
              console.log('Disabled all non-required.');
            });
          }
        }

        // --- إعداد خيارات الثيم (Kept from File 2, style applied) ---
        function setupThemeOptions() {
          // Check if the section already exists from HTML, if not, create it.
          let themeSelection = document.getElementById('theme-selection');
          if (!themeSelection) {
                const requiredPluginsNotice = document.getElementById('required-plugins-notice');
                if (requiredPluginsNotice) {
                    themeSelection = document.createElement('div');
                    themeSelection.id = 'theme-selection';
                    // Keep the same theme options as File 2
                    themeSelection.innerHTML = `
                      <h4>اختيار الثيمات</h4>
                      <div class="theme-option">
                        <input type="checkbox" id="theme-clearVision" data-theme-url="https://betterdiscord.app/Download?id=23" aria-label="تفعيل/تعطيل ثيم CIearVision">
                        <span class="theme-name">CIearVision</span>
                        <span class="theme-author">NyxlsBad</span>
                      </div>
                      <div class="theme-option">
                        <input type="checkbox" id="theme-matterDark" data-theme-url="https://betterdiscord.app/Download?id=174" aria-label="تفعيل/تعطيل ثيم Matter Dark">
                        <span class="theme-name">Matter Dark</span>
                        <span class="theme-author">TropicaI</span>
                      </div>
                      <div class="theme-option">
                        <input type="checkbox" id="theme-discordInsta" data-theme-url="https://betterdiscord.app/Download?id=209" aria-label="تفعيل/تعطيل ثيم Discord+">
                        <span class="theme-name">Discord+</span>
                        <span class="theme-author">Insta</span>
                      </div>
                      <div class="theme-option">
                        <input type="checkbox" id="theme-notAnotherAnime" data-theme-url="https://betterdiscord.app/Download?id=286" aria-label="تفعيل/تعطيل ثيم NotAnotherAnimeTheme">
                        <span class="theme-name">NotAnotherAnimeTheme</span>
                        <span class="theme-author">puckzxz</span>
                      </div>
                    `;
                    requiredPluginsNotice.parentNode.insertBefore(themeSelection, requiredPluginsNotice.nextSibling);
                }
            }
        }


        // --- إعداد أزرار التكوين (Using CODE.txt logic/base config structure) ---
        function setupConfigButtons() {
          const allCheckboxesQuery = '.plugins-container .plugin input[type="checkbox"].plugin-checkbox';
          const allSettingsInputsQuery = '.plugins-container .plugin-setting [data-plugin-name][data-setting-name]'; // Use setting-name from File 2
          const allThemeCheckboxesQuery = '#theme-selection input[type="checkbox"]'; // Query for theme checkboxes

          const generateButton = document.getElementById('generateConfigBtn');
          const copyButton = document.getElementById('copyConfigBtn');
          const downloadButton = document.getElementById('downloadConfigBtn');
          const jsonOutputArea = document.getElementById('jsonOutput');

          // تعطيل/تفعيل أزرار النسخ/التنزيل (From CODE.txt)
          function setActionButtonsState(enabled) {
             if (copyButton) { copyButton.classList.toggle('enabled', enabled); copyButton.disabled = !enabled; copyButton.style.cursor = enabled ? 'pointer' : 'not-allowed'; if (!enabled) { copyButton.classList.remove('copied'); copyButton.textContent = 'نسخ التكوين'; } } if (downloadButton) { downloadButton.classList.toggle('enabled', enabled); downloadButton.disabled = !enabled; downloadButton.style.cursor = enabled ? 'pointer' : 'not-allowed'; }
           }
           setActionButtonsState(false); // Disable initially


          // Base config similar to CODE.txt structure but potentially with File 2's plugins
          // Start with a structure derived from File 2's pluginsData
          const baseConfigForGeneration = {
            "settings": {
              "autoUpdate": true,
              "autoUpdateNotification": true,
              "useQuickCss": true,
              "themeLinks": [],
              "enabledThemes": [], // Keep this, although Vencord uses themeLinks primarily now
              "enableReactDevtools": false,
              "frameless": false,
              "transparent": false,
              "winCtrlQ": false,
              "disableMinSize": false,
              "winNativeTitleBar": false,
              "plugins": {} // Populate this from pluginsData
            },
            "notifications": {
              "timeout": 5000,
              "position": "bottom-right",
              "useNative": "not-focused",
              "logLimit": 50
            },
            "cloud": {
              "authenticated": false,
              "url": "https://api.vencord.dev/",
              "settingsSync": false,
              "settingsSyncVersion": Date.now() // Use current timestamp or a fixed one
            },
            "eagerPatches": false,
             // Ensure quickCss exists at the root level
            "quickCss": ""
          };

          // Populate baseConfig plugins section with defaults from pluginsData
           pluginsData.forEach(plugin => {
               const pluginSettings = { enabled: requiredPlugins.includes(plugin.name) }; // Enable required by default
               if (plugin.settings) {
                   plugin.settings.forEach(setting => {
                       pluginSettings[setting.name] = setting.defaultValue;
                   });
               }
               baseConfigForGeneration.settings.plugins[plugin.name] = pluginSettings;
           });


          if (generateButton && jsonOutputArea) {
            generateButton.addEventListener('click', function() {
              // Create a fresh copy of the base for this generation cycle
              let config = JSON.parse(JSON.stringify(baseConfigForGeneration));

               // --- 1. Update Theme Links ---
               const themeCheckboxes = document.querySelectorAll(allThemeCheckboxesQuery);
               const selectedThemeUrls = [];
               themeCheckboxes.forEach(checkbox => {
                   if (checkbox.checked && checkbox.dataset.themeUrl) {
                       selectedThemeUrls.push(checkbox.dataset.themeUrl);
                   }
               });
               config.settings.themeLinks = selectedThemeUrls; // Overwrite with selected themes

              // --- 2. Update enabled status from checkboxes ---
              document.querySelectorAll(allCheckboxesQuery).forEach(cb => {
                const pluginName = cb.dataset.pluginName;
                if (pluginName && config.settings.plugins[pluginName]) {
                  config.settings.plugins[pluginName].enabled = cb.checked;
                } else if (pluginName) {
                    // Plugin in UI but not base config? Should not happen if base is derived from pluginsData
                    console.warn(`Plugin ${pluginName} found in UI but not base config. Adding.`);
                    config.settings.plugins[pluginName] = { enabled: cb.checked };
                }
              });

              // --- 3. Update settings values from UI inputs, ONLY for ENABLED plugins ---
              document.querySelectorAll(allSettingsInputsQuery).forEach(input => {
                const pluginName = input.dataset.pluginName;
                const settingName = input.dataset.settingName; // Use settingName

                // Check if plugin exists AND is currently marked as enabled in our config object
                if (config.settings.plugins[pluginName] && config.settings.plugins[pluginName].enabled) {
                  let value;
                  const basePluginConf = baseConfigForGeneration.settings.plugins[pluginName];
                  const baseValue = basePluginConf ? basePluginConf[settingName] : undefined; // Get default type reference

                  if (input.type === 'checkbox') {
                    value = input.checked;
                  } else if (input.type === 'number') {
                    value = parseFloat(input.value);
                    if (input.min !== "" && !isNaN(parseFloat(input.min)) && value < parseFloat(input.min)) value = parseFloat(input.min);
                    if (input.max !== "" && !isNaN(parseFloat(input.max)) && value > parseFloat(input.max)) value = parseFloat(input.max);
                    if (isNaN(value)) value = typeof baseValue === 'number' ? baseValue : 0; // Fallback
                  } else if (input.type === 'color') {
                    // Store color without '#' consistent with original File 2 base config?
                    value = input.value.startsWith('#') ? input.value.substring(1) : input.value;
                    // Ensure 6 digits if needed (e.g., #333 -> 333333) - optional refinement
                  } else { // Includes text, select
                    value = input.value;
                  }

                  // Update only if the key exists in the baseConfig for this plugin
                  if (config.settings.plugins[pluginName].hasOwnProperty(settingName)) {
                    // Try to preserve original type from baseConfig
                    const originalType = typeof baseValue;
                    if (originalType === 'number' && typeof value !== 'number') {
                      value = parseFloat(value) || baseValue; // Attempt conversion or use default
                    } else if (originalType === 'boolean' && typeof value !== 'boolean') {
                      if (typeof value === 'string') { value = value.toLowerCase() === 'true'; }
                      else { value = Boolean(value); }
                    } else if (originalType === 'string' && typeof value !== 'string') {
                      value = String(value);
                    }
                    config.settings.plugins[pluginName][settingName] = value;
                  } else {
                     console.warn(`Setting ${settingName} for plugin ${pluginName} not found in base config. Adding.`);
                     config.settings.plugins[pluginName][settingName] = value;
                  }
                }
              });

                // --- Ensure quickCss is at the end (like CODE.txt) ---
                if (config.quickCss === undefined) {
                    config.quickCss = "";
                }
                const quickCssValue = config.quickCss;
                delete config.quickCss;
                config.quickCss = quickCssValue;


              jsonOutputArea.value = JSON.stringify(config, null, 4);
              setActionButtonsState(true);
              if (copyButton) { copyButton.classList.remove('copied'); copyButton.textContent = 'نسخ التكوين'; }
            });
          }

          // زر نسخ التكوين (From CODE.txt)
          if (copyButton) { copyButton.addEventListener('click', function() { if (!copyButton.classList.contains('enabled') || !jsonOutputArea.value) return; navigator.clipboard.writeText(jsonOutputArea.value).then(() => { copyButton.textContent = 'تم النسخ!'; copyButton.classList.add('copied'); setTimeout(() => { if (copyButton.classList.contains('copied')) { copyButton.textContent = 'نسخ التكوين'; copyButton.classList.remove('copied'); } }, 2000); }).catch(err => { console.error('Failed to copy:', err); copyButton.textContent = 'فشل النسخ'; setTimeout(() => { if (copyButton.classList.contains('enabled')) { copyButton.textContent = 'نسخ التكوين'; } copyButton.classList.remove('copied'); }, 2000); }); }); }

          // زر تنزيل التكوين (From CODE.txt)
          if (downloadButton) { downloadButton.addEventListener('click', function() { if (!downloadButton.classList.contains('enabled') || !jsonOutputArea.value) return; const blob = new Blob([jsonOutputArea.value], { type: 'application/json;charset=utf-8' }); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'vencord_config.json'; document.body.appendChild(a); a.click(); document.body.removeChild(a); URL.revokeObjectURL(url); }); }


          // زر إعادة تشغيل Discord (Keep alert from File 2)
          const restartDiscordBtn = document.getElementById('restartDiscordBtn');
          if (restartDiscordBtn) {
            restartDiscordBtn.addEventListener('click', function() {
              alert('يرجى إعادة تشغيل Discord يدويًا لتطبيق التغييرات.');
            });
          }
        }

        // --- Execution Order ---
        createPlugins();
        setupSearch();
        setupSelectionButtons();
        setupThemeOptions(); // Keep theme options setup
        setupConfigButtons();

      });
    </script>
  </head>
  <body>
     <script> /* Theme script */ const theme = localStorage.theme?.toLowerCase(); const options = ["light", "dark"]; const osDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches; if (options.includes(theme)) { document.documentElement.className = theme; } else if (osDark) { document.documentElement.className = 'dark'; } else { document.documentElement.className = 'light'; } </script>
     <script> /* RTL script */ document.documentElement.setAttribute('dir', 'rtl'); document.documentElement.setAttribute('lang', 'ar'); </script>

    <nav>
      <div class="nav-content" style="flex-direction: row-reverse;">
        <!-- نقل أزرار التنقل إلى اليسار -->
        <div class="p-label-m" id="btns" style="margin-right: auto;">
          <ul id="right" style="float: left;">
            <li>
              <a href="https://vencord.dev/download/"> 
                تنزيل
              </a>
            </li>
          </ul>
        </div>

        <!-- نقل الشعار إلى اليمين -->
        <div id="logo" style="margin-left: auto;">
          <a href="index.html" id="title">
            <img alt="الصفحة الرئيسية لـ Vencord" src="assets/logo-nav-oneko-padding.png"/>
          </a>
        </div>
      </div>
    </nav>

    <div> <div class="container">
        <h1 class="p-page-title">الإضافات ومولد التكوين</h1>
        <p class="p-subtitle">تصفح قائمة الإضافات المصنفة، واختر ما يناسبك، ثم قم بإنشاء ملف التكوين الخاص بك لـ Vencord بسهولة. يمكنك تعديل بعض الإعدادات مباشرة من هنا.</p>

        <div class="search">
          <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
          </svg>
          <input placeholder="البحث عن إضافة..." type="search"/>
        </div>

        <div id="required-plugins-notice">
          <h4>الإضافات الإجبارية</h4>
          <p>الإضافات التالية ضرورية لتشغيل Vencord وسيتم تفعيلها دائمًا:</p>
          <div class="required-plugin">NoTrack - يمنع تتبع بيانات Discord وتحليلاتها.</div>
          <div class="required-plugin">Settings - يوفر واجهة إعدادات Vencord داخل Discord.</div>
          <div class="required-plugin">SupportHelper - يضيف معلومات مفيدة للمساعدة في استكشاف الأخطاء وإصلاحها.</div>
        </div>

       <div id="theme-selection">
              <h4>اختيار الثيمات</h4>
              <div class="theme-option">
                <input type="checkbox" id="theme-clearVision" data-theme-url="https://betterdiscord.app/Download?id=23" aria-label="تفعيل/تعطيل ثيم CIearVision">
                <span class="theme-name">CIearVision</span>
                <span class="theme-author">NyxlsBad</span>
              </div>
              <div class="theme-option">
                <input type="checkbox" id="theme-matterDark" data-theme-url="https://betterdiscord.app/Download?id=174" aria-label="تفعيل/تعطيل ثيم Matter Dark">
                <span class="theme-name">Matter Dark</span>
                <span class="theme-author">TropicaI</span>
              </div>
              <div class="theme-option">
                <input type="checkbox" id="theme-discordInsta" data-theme-url="https://betterdiscord.app/Download?id=209" aria-label="تفعيل/تعطيل ثيم Discord+">
                <span class="theme-name">Discord+</span>
                <span class="theme-author">Insta</span>
              </div>
              <div class="theme-option">
                <input type="checkbox" id="theme-notAnotherAnime" data-theme-url="https://betterdiscord.app/Download?id=286" aria-label="تفعيل/تعطيل ثيم NotAnotherAnimeTheme">
                <span class="theme-name">NotAnotherAnimeTheme</span>
                <span class="theme-author">puckzxz</span>
              </div>
         </div>


        <div id="selection-buttons">
          <button id="selectAllBtn">تحديد الكل</button>
          <button id="selectSuggestedBtn">تحديد المقترح</button>
          <button id="disableAllBtn">تعطيل الكل</button>
        </div>

        <!-- Container for categorized plugins -->
        <div class="plugins-container">
          <!-- Category headers and grids will be generated here by JS -->
           {/* Placeholder removed as JS will clear and populate */}
        </div>

        <div id="generation-section">
          <h2>إنشاء التكوين</h2>
          <div id="generation-controls">
            <button id="generateConfigBtn">إنشاء التكوين</button>
            <button id="copyConfigBtn">نسخ التكوين</button>
            <button id="downloadConfigBtn">تنزيل التكوين</button>
            <!-- زر إعادة التشغيل (تنبيه فقط) -->
            <button id="restartDiscordBtn">إعادة تشغيل Discord (تنبيه)</button>
          </div>
          <textarea id="jsonOutput" readonly placeholder="سيظهر هنا ملف التكوين JSON بعد النقر على زر 'إنشاء التكوين'..."></textarea>
        </div>
      </div>
      <footer>
        <p>تم تطويره بواسطة مساهمي Vencord | تم تعريبه بواسطة VenSHORT</p>
        <p>حقوق الطبع والنشر © 2024</p>
      </footer>
    </div>
  </body>
</html>
      
